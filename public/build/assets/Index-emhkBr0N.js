import{u as k,a as x,r as p,e as N,Z as C,d as v,c as d,f as s,g as o,w as t,F as h,h as B,t as c,i as R,j as l,k as $,o as n,l as L}from"./app-LDVDDXIB.js";import{u as U}from"./useArrayHandlers-JXOu8LuP.js";import{u as M}from"./useHttpService-H3Bhthf8.js";import{_ as y}from"./InputGroup-DFOwqnPq.js";import{_ as E}from"./TheCheckbox--M688_LN.js";import{_ as F}from"./TheFilter-Bt1ein-f.js";import{_ as H}from"./TheBadge-BK2ZTkEW.js";import{_ as I}from"./TheCard-DltuzUPB.js";import{_}from"./TwoColumnRow-BlIMmxAF.js";const K={class:"row my-3"},T={class:"col-12"},j={class:"col-xl-4 col-md-6 mb-2"},D={class:"col-xl-4 col-md-6 mb-2"},G={class:"col-xl-4 col-md-6 mb-2"},O={key:0,class:"row row-cols-xl-3 row-cols-lg-2 row-cols-md-2 row-cols-sm-1 row-cols-1 g-3"},Z={class:"mb-0"},q={key:1,class:"row mb-4"},z={class:"col-12"},J={class:"mt-3 lead"},P={class:"row my-4"},Q={class:"col-12"},W={class:"fw-bold"},ne={__name:"Index",setup(X){k();const w=x(),i=U(),{get:g}=M(),u=p({customers:[]}),a=p({name:"",cityName:"",isActive:!1});N(async()=>{await V()});const V=async()=>{const{data:f}=await g(C.CUSTOMER);u.customers=f.customers},S=()=>{i.resetSearchKeys(a),i.resetSortKeys()},b=v(()=>i.sortArrayByStringColumn(u.customers,"name")),m=v(()=>i.filterArray(b.value,a));return(f,r)=>{const A=$("RouterLink");return n(),d(h,null,[s("div",K,[s("div",T,[o(F,{onResetFilter:S},{default:t(()=>[s("div",j,[o(y,{modelValue:a.name,"onUpdate:modelValue":r[0]||(r[0]=e=>a.name=e),placeholder:"Поиск по названию"},{default:t(()=>[l(" Контрагент ")]),_:1},8,["modelValue"])]),s("div",D,[o(y,{modelValue:a.cityName,"onUpdate:modelValue":r[1]||(r[1]=e=>a.cityName=e),placeholder:"Поиск по городу"},{default:t(()=>[l(" Город ")]),_:1},8,["modelValue"])]),s("div",G,[o(E,{id:"is_active",modelValue:a.isActive,"onUpdate:modelValue":r[2]||(r[2]=e=>a.isActive=e)},{default:t(()=>[l(" Показать только активных ")]),_:1},8,["modelValue"])])]),_:1})])]),m.value.length>0?(n(),d("div",O,[(n(!0),d(h,null,B(m.value,e=>(n(),L(I,{key:e.id,"header-classes":["bg-light"],"with-footer":""},{header:t(()=>[s("h4",Z,c(e.name),1)]),body:t(()=>[o(_,{title:"Регион (код)"},{default:t(()=>[l(c(e.regionCode),1)]),_:2},1024),o(_,{title:"Город"},{default:t(()=>[l(c(e.cityName),1)]),_:2},1024),o(_,{title:"Работает"},{default:t(()=>[o(H,{"is-active":e.isActive},null,8,["is-active"])]),_:2},1024)]),footer:t(()=>[o(A,{to:{name:"Manager.Customer.View",params:{id:e.id}},class:"btn btn-outline-primary"},{default:t(()=>[l("Подробнее ")]),_:2},1032,["to"])]),_:2},1024))),128))])):(n(),d("div",q,[s("div",z,[s("p",J,c(R(w).isLoading?"Подождите, загружаю...":"Записей не найдено..."),1)])])),s("div",P,[s("div",Q,[s("p",null,[l("Всего записей: "),s("span",W,c(m.value.length),1)])])])],64)}}};export{ne as default};
