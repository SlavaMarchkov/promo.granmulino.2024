import{u as Pe,a as pe,r as K,B as ae,d as w,o as g,c as D,g as t,w as c,f as e,j as u,t as m,i as o,T as ee,x as p,l as F,n as X,p as k,q as d,m as z,F as C,Z as j,s as ye,L as $e,e as me,z as Y,h as se,N as we,a3 as Ae,G as Se,H as Te,k as Me}from"./app-LDVDDXIB.js";import{u as ve,a as ke}from"./useHttpService-H3Bhthf8.js";import{u as fe}from"./useArrayHandlers-JXOu8LuP.js";import{T as Be}from"./TheSpinner-8yGDkJ68.js";import{_ as Le}from"./TheModal-aYJkSKq-.js";import{_ as N}from"./TheCard-DltuzUPB.js";import{u as W,_ as oe}from"./InputRange-Cp8YmIPk.js";import{c as H,d as J,a as R,e as te,b as h,f as b,p as be,i as _e}from"./formatters-k0Na949k.js";const Oe={class:"mb-0"},De={class:"text-primary fw-bold"},Ie={class:"mb-0"},Ve=["innerHTML"],He={class:"row"},Ne={class:"col-3"},Ce=e("h5",{class:"mb-0 card-title p-0"},"Бюджет",-1),Ue=["innerHTML"],je={class:"d-flex align-items-center"},Re=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-currency-dollar"})],-1),Fe={class:"ps-3"},Ee=["innerHTML"],qe=["innerHTML"],ze=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),Ge={class:"col-3"},Qe=e("h5",{class:"mb-0 card-title p-0"},"Продажи",-1),Je=["innerHTML"],Ke={class:"d-flex align-items-center"},We=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-cart"})],-1),Ze={class:"ps-3"},Xe=["innerHTML"],Ye=["innerHTML"],es=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),ss={class:"col-3"},ts=e("h5",{class:"mb-0 card-title p-0"},"Прибыль",-1),ls={class:"d-flex align-items-center"},os=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-currency-exchange"})],-1),as={class:"ps-3"},ns=["innerHTML"],cs=["innerHTML"],ds=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),rs={class:"col-3"},is=e("h5",{class:"mb-0 card-title p-0"},"Выручка",-1),us={class:"d-flex align-items-center"},_s=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-cash-stack"})],-1),ps={class:"ps-3"},ms=["innerHTML"],vs=["innerHTML"],fs=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),bs=e("h4",{class:"mb-0"},"Редактирование акционного продукта",-1),hs={class:"row"},gs={class:"col-md-6"},xs={class:"table table-sm border-bottom"},Ps=e("td",{class:"text-secondary"},"Группа товара",-1),ys={scope:"col",class:"text-end"},$s=e("td",{class:"text-secondary"},"Продукт",-1),ws={scope:"col",class:"text-end"},As=e("td",{class:"text-secondary"},"Акционная цена",-1),Ss={scope:"col",class:"text-end"},Ts=e("td",{class:"text-secondary"},"Скидка",-1),Ms={scope:"col",class:"text-end"},ks={class:"col-md-6"},Bs={class:"table table-sm border-bottom"},Ls=e("td",{class:"text-secondary"},'Продажи "До акции"',-1),Os={scope:"col",class:"text-end"},Ds=e("td",{class:"text-secondary"},"План прироста",-1),Is={scope:"col",class:"text-end"},Vs=e("td",{class:"text-secondary"},"Компенсация на 1 шт.",-1),Hs={scope:"col",class:"text-end"},Ns=e("td",{class:"text-secondary"},"Прибыль на 1 шт.",-1),Cs={scope:"col",class:"text-end"},Us={class:"row mb-3 g-3"},js={class:"col-md-3"},Rs={class:"input-group"},Fs=e("span",{class:"input-group-text"},"шт.",-1),Es={class:"col-md-3"},qs={class:"input-group"},zs=e("span",{class:"input-group-text"},"шт.",-1),Gs={class:"col-md-3"},Qs={class:"input-group"},Js=e("span",{class:"input-group-text"},"шт.",-1),Ks={class:"col-md-3"},Ws={class:"input-group"},Zs=e("span",{class:"input-group-text"},"%",-1),Xs={class:"row mb-3 g-3"},Ys={class:"col-md-3"},et={class:"input-group"},st=e("span",{class:"input-group-text"},"руб.",-1),tt={class:"col-md-3"},lt={class:"input-group"},ot=e("span",{class:"input-group-text"},"руб.",-1),at={class:"col-md-3"},nt={class:"input-group"},ct=e("span",{class:"input-group-text"},"руб.",-1),dt={class:"col-md-3"},rt={class:"input-group"},it=e("span",{class:"input-group-text"},"%",-1),ut={class:"row mb-3 g-3"},_t={class:"col-md-3"},pt={class:"input-group"},mt=e("span",{class:"input-group-text"},"руб.",-1),vt={class:"col-md-3"},ft={class:"input-group"},bt=e("span",{class:"input-group-text"},"руб.",-1),ht={class:"col-md-3"},gt={class:"input-group"},xt=e("span",{class:"input-group-text"},"руб.",-1),Pt={class:"col-md-3"},yt={class:"input-group"},$t=e("span",{class:"input-group-text"},"%",-1),wt={class:"row g-3"},At={class:"col-md-3"},St={class:"input-group"},Tt=e("span",{class:"input-group-text"},"руб.",-1),Mt={class:"col-md-3"},kt={class:"input-group"},Bt=e("span",{class:"input-group-text"},"руб.",-1),Lt={class:"col-md-3"},Ot={class:"input-group"},Dt=e("span",{class:"input-group-text"},"руб.",-1),It={class:"col-md-3"},Vt={class:"input-group"},Ht=e("span",{class:"input-group-text"},"%",-1),Nt={__name:"PromoProductItem",props:{index:{type:Number,default:0},promoId:{type:Number,required:!0},product:{type:Object,required:!0}},emits:["updateProductItem"],setup(A,{emit:I}){const{calcDifferencePercentage:y,calcBudget:l,calcDifference:_,calcDiffClass:M,calcDiffClassInverse:s,calcDiffPercentColor:r,calcDiffPercentColorInverse:x}=W(),$=Pe(),v=pe(),{makeConvertibleObject:V,toCamel:P}=ke(),{update:B}=ve(),a=A,E=I,f=K({editModalPopUp:!1}),S=()=>({id:a.product.id,salesOnTime:b(a.product.salesOnTime),surplusActual:a.product.surplusActual,budgetActual:a.product.budgetActual,profitPerProductActual:a.product.profitPerProductActual,revenueActual:a.product.revenueActual}),n=K({form:S()}),i=()=>{$.clear(),f.editModalPopUp=!0,n.form=S()},L=async()=>{const T=U(),O=await B(`${j.PROMO}/${a.promoId}${j.PRODUCT}/${T.id}`,T);if(O&&O.status==="success"){const q=V(JSON.parse(O.data),P);E("updateProductItem",q),f.editModalPopUp=!1}},U=()=>{const T={};return Object.keys(n.form).map(O=>T[O]=H(n.form[O])),T};ae(()=>n.form.salesOnTime,T=>{const O=H(T);isNaN(O)||(Z(O),le(O),ge(O),xe(O))});const Z=T=>{n.form.surplusActual=y(a.product.salesBefore,T)},le=T=>{n.form.budgetActual=l(T,a.product.compensation)},ge=T=>{n.form.profitPerProductActual=a.product.profitPerUnit*T},xe=T=>{n.form.revenueActual=Math.round(T*a.product.promoPrice)},ne=w(()=>{const T=H(n.form.salesOnTime);return isNaN(T)?_(a.product.salesPlan,0):_(a.product.salesPlan,T)}),ce=w(()=>_(a.product.budgetPlan,n.form.budgetActual)),de=w(()=>_(a.product.profitPerProductPlan,n.form.profitPerProductActual)),re=w(()=>_(a.product.revenuePlan,n.form.revenueActual)),G=w(()=>{const T=H(n.form.salesOnTime);return isNaN(T)?y(a.product.salesPlan,0):y(a.product.salesPlan,T)}),Q=w(()=>y(a.product.budgetPlan,n.form.budgetActual)),ie=w(()=>y(a.product.profitPerProductPlan,n.form.profitPerProductActual)),ue=w(()=>y(a.product.revenuePlan,n.form.revenueActual));return(T,O)=>(g(),D(C,null,[t(N,{"header-classes":["bg-pale py-2"]},{header:c(()=>[e("h5",Oe,[u(m(a.index+1)+". "+m(a.product.categoryName)+" ",1),e("span",De,"| "+m(a.product.productName),1)]),e("h4",Ie,[e("span",{class:"badge bg-secondary",innerHTML:o(J)(a.product.discount)},null,8,Ve)]),t(ee,{class:"btn-warning",style:{width:"20%"},onClick:i},{default:c(()=>[u("Редактировать ")]),_:1})]),body:c(()=>[e("div",He,[e("div",Ne,[t(N,{class:"info-card revenue-card"},{header:c(()=>[Ce,e("h5",{class:p(["mb-0 fw-bold",o(r)(Q.value)])},[e("span",{class:p(["bi",Q.value===0?"":Q.value>0?"bi-arrow-up":"bi-arrow-down"]),innerHTML:o(J)(Q.value)},null,10,Ue)],2)]),body:c(()=>[e("div",je,[Re,e("div",Fe,[e("h6",{innerHTML:o(R)(a.product.budgetActual)},null,8,Ee),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(R)(a.product.budgetPlan)},null,8,qe),ze])])]),_:1})]),e("div",Ge,[t(N,{class:"info-card sales-card"},{header:c(()=>[Qe,e("h5",{class:p(["mb-0 fw-bold",o(x)(G.value)])},[e("span",{class:p(["bi",G.value===0?"":G.value>0?"bi-arrow-up":"bi-arrow-down"]),innerHTML:o(J)(G.value)},null,10,Je)],2)]),body:c(()=>[e("div",Ke,[We,e("div",Ze,[e("h6",{innerHTML:o(te)(a.product.salesOnTime)},null,8,Xe),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(te)(a.product.salesPlan)},null,8,Ye),u(),es])])]),_:1})]),e("div",ss,[t(N,{class:"info-card sales-card"},{header:c(()=>[ts]),body:c(()=>[e("div",ls,[os,e("div",as,[e("h6",{innerHTML:o(R)(a.product.profitPerProductActual)},null,8,ns),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(R)(a.product.profitPerProductPlan)},null,8,cs),ds])])]),_:1})]),e("div",rs,[t(N,{class:"info-card profit-card"},{header:c(()=>[is]),body:c(()=>[e("div",us,[_s,e("div",ps,[e("h6",{innerHTML:o(R)(a.product.revenueActual)},null,8,ms),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(R)(a.product.revenuePlan)},null,8,vs),fs])])]),_:1})])])]),_:1}),f.editModalPopUp?(g(),F(Le,{key:0,modelValue:f.editModalPopUp,"onUpdate:modelValue":O[2]||(O[2]=q=>f.editModalPopUp=q),id:"editModalPopUp","custom-classes":["modal-lg"]},{title:c(()=>[bs]),body:c(()=>[e("div",hs,[e("div",gs,[e("table",xs,[e("tbody",null,[e("tr",null,[Ps,e("th",ys,m(a.product.categoryName),1)]),e("tr",null,[$s,e("th",ws,m(a.product.productName),1)]),e("tr",null,[As,e("th",Ss,m(o(h)(a.product.promoPrice))+" руб.",1)]),e("tr",null,[Ts,e("th",Ms,m(a.product.discount)+" %",1)])])])]),e("div",ks,[e("table",Bs,[e("tbody",null,[e("tr",null,[Ls,e("th",Os,m(o(b)(a.product.salesBefore))+" шт.",1)]),e("tr",null,[Ds,e("th",Is,m(o(b)(a.product.surplusPlan))+" %",1)]),e("tr",null,[Vs,e("th",Hs,m(o(h)(a.product.compensation))+" руб.",1)]),e("tr",null,[Ns,e("th",Cs,m(o(h)(a.product.profitPerUnit))+" руб.",1)])])])])]),t(X),e("div",Us,[e("div",js,[t(k,{for:"sales_plan"},{default:c(()=>[u("Продажи, план")]),_:1}),e("div",Rs,[t(d,{id:"sales_plan","model-value":o(b)(a.product.salesPlan),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),Fs])]),e("div",Es,[t(k,{for:"sales_on_time",required:""},{default:c(()=>[u("Продажи, факт")]),_:1}),e("div",qs,[t(d,{id:"sales_on_time",modelValue:n.form.salesOnTime,"onUpdate:modelValue":O[0]||(O[0]=q=>n.form.salesOnTime=q),class:"text-end",onBlur:O[1]||(O[1]=q=>o(be)(q.target.value,"sales_on_time"))},null,8,["modelValue"]),zs])]),e("div",Gs,[t(k,{for:"sales_diff"},{default:c(()=>[u("Продажи, факт - план")]),_:1}),e("div",Qs,[t(d,{id:"sales_diff","model-value":o(b)(ne.value),class:p(["text-end fw-bold",o(s)(ne.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),Js])]),e("div",Ks,[t(k,{for:"sales_diff_percent"},{default:c(()=>[u("Продажи, отклонение")]),_:1}),e("div",Ws,[t(d,{id:"sales_diff_percent","model-value":o(b)(G.value),class:p(["text-end fw-bold",o(s)(G.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),Zs])])]),e("div",Xs,[e("div",Ys,[t(k,{for:"budget_plan"},{default:c(()=>[u("Бюджет, план")]),_:1}),e("div",et,[t(d,{id:"budget_plan","model-value":o(h)(a.product.budgetPlan),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),st])]),e("div",tt,[t(k,{for:"budget_actual"},{default:c(()=>[u("Бюджет, факт")]),_:1}),e("div",lt,[t(d,{id:"budget_actual","model-value":o(h)(n.form.budgetActual),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),ot])]),e("div",at,[t(k,{for:"budget_diff"},{default:c(()=>[u("Бюджет, факт - план")]),_:1}),e("div",nt,[t(d,{id:"budget_diff","model-value":o(h)(ce.value),class:p(["text-end fw-bold",o(M)(ce.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),ct])]),e("div",dt,[t(k,{for:"budget_diff_percent"},{default:c(()=>[u("Бюджет, отклонение")]),_:1}),e("div",rt,[t(d,{id:"budget_diff_percent","model-value":o(b)(Q.value),class:p(["text-end fw-bold",o(M)(Q.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),it])])]),e("div",ut,[e("div",_t,[t(k,{for:"profit_per_product_plan"},{default:c(()=>[u("Прибыль, план")]),_:1}),e("div",pt,[t(d,{id:"profit_per_product_plan","model-value":o(h)(a.product.profitPerProductPlan),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),mt])]),e("div",vt,[t(k,{for:"profit_per_product_actual"},{default:c(()=>[u("Прибыль, факт")]),_:1}),e("div",ft,[t(d,{id:"profit_per_product_actual","model-value":o(h)(n.form.profitPerProductActual),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),bt])]),e("div",ht,[t(k,{for:"profit_per_product_diff"},{default:c(()=>[u("Прибыль, факт - план")]),_:1}),e("div",gt,[t(d,{id:"profit_per_product_diff","model-value":o(h)(de.value),class:p(["text-end fw-bold",o(s)(de.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),xt])]),e("div",Pt,[t(k,{for:"profit_per_product_diff_percent"},{default:c(()=>[u("Прибыль, отклонение")]),_:1}),e("div",yt,[t(d,{id:"profit_per_product_diff_percent","model-value":o(b)(ie.value),class:p(["text-end fw-bold",o(s)(ie.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),$t])])]),e("div",wt,[e("div",At,[t(k,{for:"revenue_plan"},{default:c(()=>[u("Выручка, план")]),_:1}),e("div",St,[t(d,{id:"revenue_plan","model-value":o(h)(a.product.revenuePlan),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),Tt])]),e("div",Mt,[t(k,{for:"revenue_actual"},{default:c(()=>[u("Выручка, факт")]),_:1}),e("div",kt,[t(d,{id:"revenue_actual","model-value":o(h)(n.form.revenueActual),class:"text-end bg-warning-light",readonly:"readonly",tabindex:-1},null,8,["model-value"]),Bt])]),e("div",Lt,[t(k,{for:"revenue_diff"},{default:c(()=>[u("Выручка, факт - план")]),_:1}),e("div",Ot,[t(d,{id:"revenue_diff","model-value":o(h)(re.value),class:p(["text-end fw-bold",o(s)(re.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),Dt])]),e("div",It,[t(k,{for:"revenue_diff_percent"},{default:c(()=>[u("Выручка, отклонение")]),_:1}),e("div",Vt,[t(d,{id:"revenue_diff_percent","model-value":o(b)(ue.value),class:p(["text-end fw-bold",o(s)(ue.value)]),readonly:"readonly",tabindex:-1},null,8,["model-value","class"]),Ht])])])]),footer:c(()=>[t(ee,{disabled:o(v).isButtonDisabled||isNaN(o(H)(n.form.salesOnTime)),loading:o(v).isButtonDisabled,type:"button",class:"btn-warning w-25",onClick:L},{default:c(()=>[u("Сохранить изменения")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])):z("",!0)],64))}},Ct={class:"row mb-4"},Ut={class:"col-3"},jt={class:"fw-bold fs-5"},Rt={class:"col-3"},Ft={class:"fw-bold fs-5"},Et={class:"col-3"},qt={class:"fw-bold fs-5"},zt={class:"col-3 text-center"},Gt={class:"row"},Qt={class:"col-6"},Jt={class:"form-floating"},Kt=e("label",{for:"promo_comments"},"Выводы по промо-акции",-1),Wt={class:"col-6 align-content-center"},Zt={__name:"PromoMark",props:{mark:{type:Object,required:!0}},emits:["updatePromoMark"],setup(A,{emit:I}){const{getAverageOfArray:y}=fe(),l=A,_=I,M=()=>{const x={sales:l.mark.sales,goals:l.mark.goals,staff:l.mark.staff};return Array.from(Object.entries(x),([$,v])=>v)},s=w(()=>{const x=M();return y(x)}),r=()=>{_("updatePromoMark",l.mark)};return(x,$)=>(g(),D(C,null,[e("div",Ct,[e("div",Ut,[t(k,{for:"promo_goals"},{default:c(()=>[u("Цель промо-акции: "),e("span",jt,m(l.mark.goals),1)]),_:1}),t(oe,{id:"promo_goals",modelValue:l.mark.goals,"onUpdate:modelValue":$[0]||($[0]=v=>l.mark.goals=v)},null,8,["modelValue"])]),e("div",Rt,[t(k,{for:"promo_sales"},{default:c(()=>[u("Продажи: "),e("span",Ft,m(l.mark.sales),1)]),_:1}),t(oe,{id:"promo_sales",modelValue:l.mark.sales,"onUpdate:modelValue":$[1]||($[1]=v=>l.mark.sales=v)},null,8,["modelValue"])]),e("div",Et,[t(k,{for:"promo_staff"},{default:c(()=>[u("Участие персонала: "),e("span",qt,m(l.mark.staff),1)]),_:1}),t(oe,{id:"promo_staff",modelValue:l.mark.staff,"onUpdate:modelValue":$[2]||($[2]=v=>l.mark.staff=v)},null,8,["modelValue"])]),e("div",zt,[t(k,{for:"total_promo_mark"},{default:c(()=>[u("Средняя оценка")]),_:1}),t(d,{id:"total_promo_mark","model-value":s.value,class:"text-center w-50 mx-auto fw-bold"},null,8,["model-value"])])]),e("div",Gt,[e("div",Qt,[e("div",Jt,[ye(e("textarea",{id:"promo_comments","onUpdate:modelValue":$[3]||($[3]=v=>l.mark.comments=v),class:"form-control border border-dark",placeholder:"Укажите здесь свои выводы по промо-акции",style:{height:"60px"}},null,512),[[$e,l.mark.comments]]),Kt])]),e("div",Wt,[t(ee,{class:"btn-primary",onClick:r},{default:c(()=>[u("Сохранить оценку и выводы ")]),_:1})])])],64))}},Xt={class:"col-md-4"},Yt=e("h5",{class:"mb-0 card-title p-0"},"Бюджет",-1),el=["innerHTML"],sl={class:"d-flex align-items-center"},tl=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-currency-dollar"})],-1),ll={class:"ps-3"},ol=["innerHTML"],al=["innerHTML"],nl=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),cl={class:"col-md-4"},dl=e("h5",{class:"mb-0 card-title p-0"},"Продажи",-1),rl=["innerHTML"],il={class:"d-flex align-items-center"},ul=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-cart"})],-1),_l={class:"ps-3"},pl=["innerHTML"],ml=["innerHTML"],vl=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),fl={class:"col-md-4"},bl=e("h5",{class:"mb-0 card-title p-0"},"Общая прибыль",-1),hl=["innerHTML"],gl={class:"d-flex align-items-center"},xl=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-cash-stack"})],-1),Pl={class:"ps-3"},yl=["innerHTML"],$l=["innerHTML"],wl=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),Al={__name:"ProductCards",props:{totalBudgetPlan:{type:String,default:"0"},totalBudgetActual:{type:String,default:"0"},totalSalesPlan:{type:String,default:"0"},totalSalesOnTime:{type:String,default:"0"},totalPromoProfitPlan:{type:String,default:"0"},totalPromoProfitActual:{type:String,default:"0"}},setup(A){const{calcDifferencePercentage:I,calcDiffPercentColor:y,calcDiffPercentColorInverse:l}=W(),_=A,M=w(()=>I(_.totalBudgetPlan,_.totalBudgetActual)),s=w(()=>I(_.totalSalesPlan,_.totalSalesOnTime)),r=w(()=>I(_.totalPromoProfitPlan,_.totalPromoProfitActual));return(x,$)=>(g(),D(C,null,[e("div",Xt,[t(N,{class:"info-card revenue-card"},{header:c(()=>[Yt,e("h5",{class:p(["mb-0 fw-bold",o(y)(M.value)])},[e("span",{class:p(["bi",M.value===0?"":M.value>0?"bi-arrow-up":"bi-arrow-down"]),innerHTML:o(J)(M.value)},null,10,el)],2)]),body:c(()=>[e("div",sl,[tl,e("div",ll,[e("h6",{innerHTML:o(R)(_.totalBudgetActual)},null,8,ol),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(R)(_.totalBudgetPlan)},null,8,al),nl])])]),_:1})]),e("div",cl,[t(N,{class:"info-card sales-card"},{header:c(()=>[dl,e("h5",{class:p(["mb-0 fw-bold",o(l)(s.value)])},[e("span",{class:p(["bi",s.value===0?"":s.value>0?"bi-arrow-up":"bi-arrow-down"]),innerHTML:o(J)(s.value)},null,10,rl)],2)]),body:c(()=>[e("div",il,[ul,e("div",_l,[e("h6",{innerHTML:o(te)(_.totalSalesOnTime)},null,8,pl),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(te)(_.totalSalesPlan)},null,8,ml),u(),vl])])]),_:1})]),e("div",fl,[t(N,{class:"info-card profit-card"},{header:c(()=>[bl,e("h5",{class:p(["mb-0 fw-bold",o(l)(r.value)])},[e("span",{class:p(["bi",r.value===0?"":r.value>0?"bi-arrow-up":"bi-arrow-down"]),innerHTML:o(J)(r.value)},null,10,hl)],2)]),body:c(()=>[e("div",gl,[xl,e("div",Pl,[e("h6",{innerHTML:o(R)(_.totalPromoProfitActual)},null,8,yl),e("span",{class:"text-success small pt-1 fw-bold",innerHTML:o(R)(_.totalPromoProfitPlan)},null,8,$l),u(),wl])])]),_:1})])],64))}},Sl={class:"col-4"},Tl=e("h5",{class:"mb-0 card-title p-0"},"Бюджет",-1),Ml={class:"d-flex align-items-center"},kl=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-currency-dollar"})],-1),Bl={class:"ps-3"},Ll={class:"text-success small pt-1 fw-bold"},Ol=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),Dl={class:"col-4"},Il=e("h5",{class:"mb-0 card-title p-0"},"Продажи, план",-1),Vl={class:"d-flex align-items-center"},Hl=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-cart"})],-1),Nl={class:"ps-3"},Cl={class:"text-success small pt-1 fw-bold"},Ul=e("span",{class:"text-muted small pt-2 ps-1"}," | до акции",-1),jl={class:"col-4"},Rl=e("h5",{class:"mb-0 card-title p-0"},"Продажи, факт",-1),Fl={class:"d-flex align-items-center"},El=e("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[e("i",{class:"bi bi-cart"})],-1),ql={class:"ps-3"},zl={class:"text-success small pt-1 fw-bold"},Gl=e("span",{class:"text-muted small pt-2 ps-1"}," | план",-1),Ql={__name:"SalesCards",props:{totalBudgetPlan:{type:String,default:"0"},totalBudgetActual:{type:String,default:"0"},totalSalesBefore:{type:String,default:"0"},totalSalesPlan:{type:String,default:"0"},totalSalesAfter:{type:String,default:"0"}},setup(A){const{calcDifferencePercentage:I}=W(),y=A,l=w(()=>{const r=I(y.totalSalesBefore,y.totalSalesPlan);if(!isNaN(r))return b(r)}),_=w(()=>{const r=I(y.totalSalesAfter,y.totalSalesPlan);if(!isNaN(r))return b(r)}),M=w(()=>_e(l.value)?"text-danger":l.value==="0"?"text-secondary":"text-success"),s=w(()=>_e(_.value)?"text-danger":_.value==="0"?"text-secondary":"text-success");return(r,x)=>(g(),D(C,null,[e("div",Sl,[t(N,{class:"info-card revenue-card"},{header:c(()=>[Tl]),body:c(()=>[e("div",Ml,[kl,e("div",Bl,[e("h6",null,m(o(b)(A.totalBudgetActual))+" ₽",1),e("span",Ll,m(o(b)(A.totalBudgetPlan))+" ₽",1),Ol])])]),_:1})]),e("div",Dl,[t(N,{class:"info-card sales-card"},{header:c(()=>[Il,e("h5",{class:p(["mb-0 fw-bold",M.value])},[e("i",{class:p(["bi",l.value>=0?"bi-arrow-up":"bi-arrow-down"])},null,2),u(" "+m(l.value)+" %",1)],2)]),body:c(()=>[e("div",Vl,[Hl,e("div",Nl,[e("h6",null,m(o(b)(A.totalSalesPlan))+" шт.",1),e("span",Cl,m(o(b)(A.totalSalesBefore))+" шт.",1),u(),Ul])])]),_:1})]),e("div",jl,[t(N,{class:"info-card sales-card"},{header:c(()=>[Rl,e("h5",{class:p(["mb-0 fw-bold",s.value])},[e("i",{class:p(["bi",_.value==="0"?"":_.value>=0?"bi-arrow-up":"bi-arrow-down"])},null,2),u(" "+m(_.value)+" %",1)],2)]),body:c(()=>[e("div",Fl,[El,e("div",ql,[e("h6",null,m(o(b)(A.totalSalesAfter))+" шт.",1),e("span",zl,m(o(b)(A.totalSalesPlan))+" шт.",1),u(),Gl])])]),_:1})])],64))}},Jl={class:"list-group-item m-0 px-2"},Kl={class:"row"},Wl={class:"col-md-3 col-sm-12"},Zl={class:"col-md-4 col-sm-12"},Xl={class:"row"},Yl={class:"col-md-4 col-sm-6"},eo={class:"col-md-4 col-sm-6"},so={class:"col-md-4 col-sm-6"},to={class:"col-md-5 col-sm-12"},lo={class:"row"},oo={class:"col-md-3 col-sm-6"},ao={class:"col-md-3 col-sm-6"},no={class:"col-md-3 col-sm-6"},co={class:"col-md-3 col-sm-6"},he={__name:"SalesPeopleSellerItem",props:{seller:{type:Object,required:!0},index:{type:Number,default:0}},emits:["updateSeller"],setup(A,{emit:I}){const{calcPercentage:y}=W();me(()=>{document.getElementById("0_salesAfter").focus()});const l=A,_=I,s=K({seller:{id:l.seller.id,name:l.seller.name,sellerId:l.seller.sellerId,supervisorId:l.seller.supervisorId,isSupervisor:l.seller.isSupervisor,salesBefore:b(l.seller.salesBefore),salesPlan:b(l.seller.salesPlan),salesAfter:b(l.seller.salesAfter),compensationPlan:l.seller.compensationPlan,compensationActual:l.seller.compensationActual,budgetPlan:h(l.seller.budgetPlan),budgetActual:h(l.seller.budgetActual)}});ae(()=>s.seller.salesAfter,v=>{const V=H(String(v)),P=isNaN(V)?0:V,B=s.seller;B.salesAfter=P,_("updateSeller",B)});const r=w(()=>{if(s.seller.salesAfter===0)return h(0);{const v=y(s.seller.salesPlan,s.seller.salesAfter);return h(v)}}),x=w(()=>H(r.value)<90?"border-danger bg-sales-fail text-danger":"border-success bg-sales-success text-black"),$=w(()=>{const v=H(s.seller.compensationPlan.toString()),V=H(s.seller.salesAfter.toString()),P=H(r.value)<90?0:(V*v/100).toFixed(2);return s.seller.budgetActual=P,h(P)});return(v,V)=>(g(),D("li",Jl,[e("div",Kl,[e("div",Wl,[t(d,{value:l.seller.name,class:p({"border-warning":!l.seller.supervisorId}),readonly:"",tabindex:-1},null,8,["value","class"])]),e("div",Zl,[e("div",Xl,[e("div",Yl,[t(d,{class:p(["text-end",{"border-warning":!l.seller.supervisorId}]),"model-value":s.seller.salesBefore,readonly:"",tabindex:-1},null,8,["class","model-value"])]),e("div",eo,[t(d,{class:p(["text-end",{"border-warning":!l.seller.supervisorId}]),"model-value":s.seller.salesPlan,readonly:"",tabindex:-1},null,8,["class","model-value"])]),e("div",so,[t(d,{id:`${A.index}_salesAfter`,class:p(["text-end",{"border-warning":!l.seller.supervisorId}]),modelValue:s.seller.salesAfter,"onUpdate:modelValue":V[0]||(V[0]=P=>s.seller.salesAfter=P),tabindex:0,onBlur:V[1]||(V[1]=P=>o(be)(P.target.value,`${A.index}_salesAfter`))},null,8,["id","class","modelValue"])])])]),e("div",to,[e("div",lo,[e("div",oo,[t(d,{class:p(["text-end",{"border-warning":!l.seller.supervisorId},x.value]),"model-value":r.value,readonly:"",tabindex:-1},null,8,["class","model-value"])]),e("div",ao,[t(d,{class:p(["text-end",{"border-warning":!l.seller.supervisorId}]),"model-value":s.seller.compensationPlan,readonly:"",tabindex:-1},null,8,["class","model-value"])]),e("div",no,[t(d,{class:p(["text-end",{"border-warning":!l.seller.supervisorId}]),"model-value":s.seller.budgetPlan,readonly:"",tabindex:-1},null,8,["class","model-value"])]),e("div",co,[t(d,{class:p(["text-end",{"border-warning":!l.seller.supervisorId},x.value]),"model-value":$.value,readonly:"",tabindex:-1},null,8,["class","model-value"])])])])])]))}},ro={class:"list-group-item m-0 px-2"},io={class:"row"},uo={class:"col-md-3 col-sm-12"},_o={class:"input-group"},po={class:"input-group-text"},mo=["value"],vo={class:"col-md-4 col-sm-12"},fo={class:"row"},bo={class:"col-md-4 col-sm-6"},ho={class:"col-md-4 col-sm-6"},go={class:"col-md-4 col-sm-6"},xo={class:"col-md-5 col-sm-12"},Po={class:"row"},yo={class:"col-md-3 col-sm-6"},$o={class:"col-md-3 col-sm-6"},wo={class:"col-md-3 col-sm-6"},Ao={class:"col-md-3 col-sm-6"},So={__name:"SalesPeopleSupervisorItem",props:{supervisor:{type:Object,required:!0},index:{type:Number,default:0},sellers:{type:Array,required:!0,default:()=>[]}},emits:["updateSupervisor"],setup(A,{emit:I}){const{calcPercentage:y}=W(),l=A,_=I,s=K({supervisor:{id:l.supervisor.id,name:l.supervisor.name,sellerId:l.supervisor.sellerId,supervisorId:l.supervisor.supervisorId,isSupervisor:l.supervisor.isSupervisor,salesBefore:b(l.supervisor.salesBefore),salesPlan:b(l.supervisor.salesPlan),salesAfter:b(l.supervisor.salesAfter),surplusPlan:l.supervisor.surplusPlan,compensationPlan:l.supervisor.compensationPlan,compensationActual:l.supervisor.compensationActual,budgetPlan:h(l.supervisor.budgetPlan),budgetActual:h(l.supervisor.budgetActual)}}),r=Y(l.sellers),x=P=>{const B=r.value.findIndex(a=>a.id===P.id);r.value[B]={...P},s.supervisor.salesAfter=b($()),s.supervisor.budgetActual=h(V()),_("updateSupervisor",s.supervisor,P)},$=()=>r.value.reduce((P,B)=>{if(s.supervisor.sellerId===B.supervisorId){const a=H(B.salesAfter.toString());P+=a}return P},0),v=w(()=>{if(s.supervisor.salesAfter!==0){const P=y(s.supervisor.salesPlan,s.supervisor.salesAfter);return h(P)}else return h(0)}),V=()=>{const P=H(s.supervisor.compensationPlan.toString());return(H(s.supervisor.salesAfter)*P/100).toFixed(2)};return(P,B)=>(g(),D(C,null,[e("li",ro,[e("div",io,[e("div",uo,[e("div",_o,[e("span",po,m(A.index+1),1),e("input",{value:l.supervisor.name,class:"form-control fw-bold",readonly:"",type:"text",tabindex:"-1"},null,8,mo)])]),e("div",vo,[e("div",fo,[e("div",bo,[t(d,{class:"fw-bold border-primary text-end","model-value":s.supervisor.salesBefore,readonly:"",tabindex:-1},null,8,["model-value"])]),e("div",ho,[t(d,{class:"fw-bold border-primary text-end","model-value":s.supervisor.salesPlan,readonly:"",tabindex:-1},null,8,["model-value"])]),e("div",go,[t(d,{class:"fw-bold border-primary text-end",modelValue:s.supervisor.salesAfter,"onUpdate:modelValue":B[0]||(B[0]=a=>s.supervisor.salesAfter=a),readonly:"",tabindex:-1},null,8,["modelValue"])])])]),e("div",xo,[e("div",Po,[e("div",yo,[t(d,{class:"fw-bold border-primary text-end","model-value":v.value,readonly:"",tabindex:-1},null,8,["model-value"])]),e("div",$o,[t(d,{class:"fw-bold border-primary text-end","model-value":s.supervisor.compensationPlan,readonly:"",tabindex:-1},null,8,["model-value"])]),e("div",wo,[t(d,{class:"fw-bold border-primary text-end","model-value":s.supervisor.budgetPlan,readonly:"",tabindex:-1},null,8,["model-value"])]),e("div",Ao,[t(d,{class:"fw-bold border-primary text-end",modelValue:s.supervisor.budgetActual,"onUpdate:modelValue":B[1]||(B[1]=a=>s.supervisor.budgetActual=a),readonly:"",tabindex:-1},null,8,["modelValue"])])])])])]),(g(!0),D(C,null,se(r.value,(a,E)=>(g(),D(C,{key:a.id},[a.supervisorId===l.supervisor.sellerId?(g(),F(he,{key:0,seller:a,index:E,onUpdateSeller:x},null,8,["seller","index"])):z("",!0)],64))),128))],64))}},To={class:"row flex-column g-3"},Mo=e("p",{class:"mb-0"},"Введите фактическое выполнение плана продаж (в рублях) для торговых представителей, участвующих в акции.",-1),ko={class:"list-group"},Bo=we('<li class="list-group-item m-0 px-2"><div class="row g-2 text-center align-items-center p-0"><div class="col-md-3 col-sm-12">ФИО</div><div class="col-md-4 col-sm-12"><div class="row"><div class="col-md-4 col-sm-6">Продажи &quot;До&quot;</div><div class="col-md-4 col-sm-6">Продажи, план</div><div class="col-md-4 col-sm-6">Продажи, факт</div></div></div><div class="col-md-5 col-sm-12"><div class="row"><div class="col-md-3 col-sm-6">Выполнение, %</div><div class="col-md-3 col-sm-6">Мотивация, %</div><div class="col-md-3 col-sm-6">Бюджет, план</div><div class="col-md-3 col-sm-6">Бюджет, факт</div></div></div></div></li>',1),Lo={class:"list-group-item m-0 px-2 bg-warning-light"},Oo={class:"row text-center align-items-center"},Do=e("div",{class:"col-md-3 col-sm-12"},[e("span",{class:"fw-bold"},"ИТОГО")],-1),Io={class:"col-md-4 col-sm-12"},Vo={class:"row"},Ho={class:"col-md-4 col-sm-6"},No={class:"col-md-4 col-sm-6"},Co={class:"col-md-4 col-sm-6"},Uo={class:"col-md-5 col-sm-12"},jo={class:"row"},Ro={class:"col-md-3 col-sm-6"},Fo={class:"col-md-3 col-sm-6"},Eo={class:"col-md-3 col-sm-6"},qo={class:"col-md-3 col-sm-6"},zo={__name:"SalesPeopleBoost",props:{items:{type:Array,default:()=>[]},promo:{type:Object,required:!0,default:()=>{}}},emits:["updatePromoSellers"],setup(A,{emit:I}){const{calcPercentage:y}=W(),l=A,_=I,s=K({promo:{id:l.promo.id,totalSalesBefore:b(l.promo.totalSalesBefore),totalSalesPlan:b(l.promo.totalSalesPlan),totalSalesAfter:b(l.promo.totalSalesAfter),totalBudgetPlan:h(l.promo.totalBudgetPlan),totalBudgetActual:h(l.promo.totalBudgetActual)}}),r=w(()=>l.items.filter(f=>f.isSupervisor)),x=w(()=>l.items.filter(f=>!f.isSupervisor));function $(){Ae(()=>{s.promo.totalSalesAfter=b(B()),s.promo.totalBudgetActual=h(E())});const f=r.value.concat(x.value);_("updatePromoSellers",s.promo,f)}const v=f=>{const S=x.value.findIndex(n=>n.id===f.id);x.value[S]=f},V=f=>{v(f),$()},P=(f,S)=>{const n=r.value.findIndex(i=>i.id===f.id);r.value[n]=f,v(S),$()},B=()=>{const f=r.value.reduce((n,i)=>n+H(i.salesAfter.toString()),0),S=x.value.reduce((n,i)=>{if(i.supervisorId===null){const L=H(i.salesAfter.toString());n+=L}return n},0);return f+S},a=w(()=>{if(s.promo.totalSalesAfter!==0){const f=y(s.promo.totalSalesPlan,s.promo.totalSalesAfter);return h(f)}else return h(0)}),E=()=>{const f=r.value.reduce((n,i)=>n+H(i.budgetActual.toString()),0),S=x.value.reduce((n,i)=>n+H(i.budgetActual.toString()),0);return f+S};return(f,S)=>(g(),D("div",To,[Mo,e("ul",ko,[Bo,(g(!0),D(C,null,se(r.value,(n,i)=>(g(),F(So,{key:n.id,index:i,sellers:x.value,supervisor:n,onUpdateSupervisor:P},null,8,["index","sellers","supervisor"]))),128)),(g(!0),D(C,null,se(x.value,(n,i)=>(g(),D(C,{key:n.id},[n.supervisorId===null?(g(),F(he,{key:0,seller:n,index:i,onUpdateSeller:V},null,8,["seller","index"])):z("",!0)],64))),128)),e("li",Lo,[e("div",Oo,[Do,e("div",Io,[e("div",Vo,[e("div",Ho,[t(d,{modelValue:s.promo.totalSalesBefore,"onUpdate:modelValue":S[0]||(S[0]=n=>s.promo.totalSalesBefore=n),class:"fw-bold border-secondary text-end",readonly:"",tabindex:-1},null,8,["modelValue"])]),e("div",No,[t(d,{modelValue:s.promo.totalSalesPlan,"onUpdate:modelValue":S[1]||(S[1]=n=>s.promo.totalSalesPlan=n),class:"fw-bold border-secondary text-end",readonly:"",tabindex:-1},null,8,["modelValue"])]),e("div",Co,[t(d,{modelValue:s.promo.totalSalesAfter,"onUpdate:modelValue":S[2]||(S[2]=n=>s.promo.totalSalesAfter=n),class:"fw-bold border-secondary text-end",readonly:"",tabindex:-1},null,8,["modelValue"])])])]),e("div",Uo,[e("div",jo,[e("div",Ro,[t(d,{class:"fw-bold border-secondary text-end","model-value":a.value,readonly:"",tabindex:-1},null,8,["model-value"])]),e("div",Fo,[t(d,{class:"bg-warning-light",readonly:"",tabindex:-1})]),e("div",Eo,[t(d,{modelValue:s.promo.totalBudgetPlan,"onUpdate:modelValue":S[3]||(S[3]=n=>s.promo.totalBudgetPlan=n),class:"fw-bold border-secondary text-end",readonly:"",tabindex:-1},null,8,["modelValue"])]),e("div",qo,[t(d,{modelValue:s.promo.totalBudgetActual,"onUpdate:modelValue":S[4]||(S[4]=n=>s.promo.totalBudgetActual=n),class:"fw-bold border-primary text-end",readonly:"",tabindex:-1},null,8,["modelValue"])])])])])])])]))}},Go={key:0,class:"row"},Qo={class:"col-12"},Jo={class:"my-4"},Ko={key:0,class:"row promo-view"},Wo={class:"col-12"},Zo={class:"card"},Xo={class:"card-header bg-light d-flex justify-content-between align-items-center"},Yo={class:"mb-0"},ea={class:"text-secondary fs-5"},sa={class:"mb-0"},ta={class:"mb-0"},la={class:"card-body mt-2 g-3"},oa={class:"row mb-2"},aa={class:"col-4"},na={class:"mb-0 alert border-primary"},ca={class:"mb-0 text-secondary"},da={class:"fw-bold text-accent"},ra={class:"col-4"},ia={class:"mb-0 alert border-success",role:"alert"},ua={class:"mb-0 text-secondary"},_a={class:"fw-bold text-accent"},pa={class:"col-4"},ma={class:"mb-0 alert border-info",role:"alert"},va={class:"mb-0 text-secondary"},fa={class:"fw-bold text-accent"},ba={class:"row"},ha={class:"card-footer"},ga={id:"promoDetails",class:"accordion"},xa={class:"accordion-item"},Pa=e("h2",{id:"promoComments",class:"accordion-header"},[e("button",{"aria-controls":"collapsePromoComments","aria-expanded":"false",class:"accordion-button collapsed","data-bs-target":"#collapsePromoComments","data-bs-toggle":"collapse",type:"button"},[e("span",{class:"card-title p-0 m-0"},"Механика промо-акции")])],-1),ya={id:"collapsePromoComments","aria-labelledby":"promoComments",class:"accordion-collapse collapse","data-bs-parent":"#promoDetails"},$a={class:"accordion-body"},wa={class:"accordion-item"},Aa=e("h2",{id:"promoMark",class:"accordion-header"},[e("button",{"aria-controls":"collapsePromoMark","aria-expanded":"false",class:"accordion-button collapsed","data-bs-target":"#collapsePromoMark","data-bs-toggle":"collapse",type:"button"},[e("span",{class:"card-title p-0 m-0"},"Оценки промо-акции")])],-1),Sa={id:"collapsePromoMark","aria-labelledby":"promoMark",class:"accordion-collapse collapse","data-bs-parent":"#promoDetails"},Ta={class:"accordion-body"},Ma={key:0,class:"col-12"},ka=e("h4",{class:"mb-0"},"Акционная продукция",-1),Ba={class:"row flex-column g-3"},La={key:1,class:"col-12"},Oa=e("h4",{class:"mb-0"},"Мотивация команды ТП",-1),Da=e("hr",null,null,-1),Fa={__name:"View",setup(A){const I=Se();Te();const y=pe();fe();const{get:l,update:_}=ve(),M=+I.params.id,s=Y({}),r=Y([]),x=Y([]);let $=K({promo:null,sellers:null});me(async()=>{await V(M)});const v=w(()=>Object.keys(s.value).length!==0),V=async i=>{const{status:L,data:U}=await l(`${j.PROMO}/${i}`);L==="success"&&(s.value=U)};ae(()=>s.value.promoType,i=>{switch(i){case"DISCOUNT":P(M);break;case"SALES_PEOPLE_BOOST":B(M);break}});const P=async i=>{const{status:L,data:U}=await l(`${j.PROMO}/${i}${j.PRODUCT}`);L==="success"&&(r.value=U)},B=async i=>{const{status:L,data:U}=await l(`${j.PROMO}/${i}${j.SELLER}`);L==="success"&&(x.value=U)},a=i=>{const L=r.value.findIndex(U=>U.id===i.product.id);r.value[L]={...r.value[L],...i.product},s.value={...s.value,...i.promo}},E=async i=>{const L=await _(`${j.PROMO}/${M}${j.MARK}/${i.id}`,i);L&&L.status==="success"&&(s.value={...L.data})},f=async()=>{const i=await _(`${j.PROMO}/${M}`,$);i&&i.status==="success"&&(s.value={...s.value,...i.data},x.value=$.sellers,$={promo:null,sellers:null})},S=(i,L)=>{$.promo=i,$.sellers=L},n=w(()=>s.value.totalMark>0&&s.value.totalMark<=3?"bg-danger":s.value.totalMark>3&&s.value.totalMark<=5?"bg-success":"bg-secondary");return(i,L)=>{const U=Me("RouterLink");return g(),D(C,null,[o(y).isLoading?(g(),D("div",Go,[e("div",Qo,[e("h4",Jo,[t(Be)])])])):(g(),D(C,{key:1},[v.value?(g(),D("div",Ko,[e("div",Wo,[e("div",Zo,[e("div",Xo,[e("h3",Yo,[u(m(s.value.promoCode)+" ",1),e("span",ea,"| "+m(s.value.channelName),1)]),e("h4",sa,[e("span",{class:p(["badge",s.value.statusColor])},m(s.value.statusLabel),3)]),e("h2",ta,[e("span",{class:p(["badge",n.value])},m(s.value.totalMark),3)])]),e("div",la,[e("div",oa,[e("div",aa,[e("div",na,[e("h5",ca,[u("Дистрибутор: "),e("span",da,m(s.value.customerName),1)])])]),e("div",ra,[e("div",ia,[e("h5",ua,[u("Сеть: "),e("span",_a,m(s.value.retailerName??"—"),1)])])]),e("div",pa,[e("div",ma,[e("h5",va,[u("Период: "),e("span",fa,m(s.value.startDate)+" - "+m(s.value.endDate),1)])])])]),e("div",ba,[s.value.promoType==="DISCOUNT"?(g(),F(Al,{key:0,"total-budget-plan":s.value.totalBudgetPlan,"total-budget-actual":s.value.totalBudgetActual,"total-sales-on-time":s.value.totalSalesOnTime,"total-sales-plan":s.value.totalSalesPlan,"total-promo-profit-plan":s.value.totalPromoProfitPlan,"total-promo-profit-actual":s.value.totalPromoProfitActual},null,8,["total-budget-plan","total-budget-actual","total-sales-on-time","total-sales-plan","total-promo-profit-plan","total-promo-profit-actual"])):z("",!0),s.value.promoType==="SALES_PEOPLE_BOOST"?(g(),F(Ql,{key:1,"total-budget-plan":s.value.totalBudgetPlan,"total-budget-actual":s.value.totalBudgetActual,"total-sales-before":s.value.totalSalesBefore,"total-sales-plan":s.value.totalSalesPlan,"total-sales-after":s.value.totalSalesAfter},null,8,["total-budget-plan","total-budget-actual","total-sales-before","total-sales-plan","total-sales-after"])):z("",!0)])]),e("div",ha,[e("div",ga,[e("div",xa,[Pa,e("div",ya,[e("div",$a,m(s.value.comments),1)])]),e("div",wa,[Aa,e("div",Sa,[e("div",Ta,[t(X),t(Zt,{mark:s.value.mark,onUpdatePromoMark:E},null,8,["mark"])])])])])])])]),r.value.length>0?(g(),D("div",Ma,[t(N,null,{header:c(()=>[ka]),body:c(()=>[e("div",Ba,[(g(!0),D(C,null,se(r.value,(Z,le)=>(g(),F(Nt,{key:Z.id,index:le,product:Z,"promo-id":M,onUpdateProductItem:a},null,8,["index","product"]))),128))])]),_:1})])):z("",!0),x.value.length>0?(g(),D("div",La,[t(N,null,{header:c(()=>[Oa,t(ee,{onClick:f,class:"btn-success",style:{width:"15%"},disabled:o(y).isButtonDisabled,loading:o(y).isButtonDisabled},{default:c(()=>[u("Сохранить изменения")]),_:1},8,["disabled","loading"])]),body:c(()=>[t(X),t(zo,{items:x.value,promo:s.value,onUpdatePromoSellers:S},null,8,["items","promo"])]),_:1})])):z("",!0)])):(g(),F(X,{key:1,class:"mt-3"}))],64)),Da,t(U,{to:{name:"Manager.Promo.Index"},class:"btn btn-secondary my-2",role:"button"},{default:c(()=>[u("Обратно на Мои Промо-акции ")]),_:1})],64)}}};export{Fa as default};
