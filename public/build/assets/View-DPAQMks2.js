import{b as N,a as S,d as u,y as D,e as V,A,H as B,c as n,i as v,f as t,g as s,F as p,t as a,m as O,w as l,T as _,l as $,z as L,B as M,k as U,o,j as c,R as E,V as F,W as H,n as j}from"./app-BPdZrYo3.js";import{u as G}from"./useHttpService-BNZ4gPHT.js";import{T as z}from"./TheSpinner-BVwa_w8D.js";import{f as W}from"./formatters-hPmLyB9N.js";import{_ as q}from"./TheBadge-DfL1MJO3.js";const J={key:0,class:"row"},K={class:"col-12"},Q={class:"my-4"},X={key:0,class:"row"},Y={class:"col-xl-6"},Z={class:"card"},tt={class:"card-header bg-primary text-white"},et={class:"mb-0"},st={class:"card-body py-5"},at={class:"table table-bordered align-middle text-wrap",style:{width:"100%"}},ot=t("th",{style:{width:"30%"}},"ID",-1),nt=t("th",null,"Название",-1),lt=t("th",null,"Вес, г",-1),ct={key:0},it=t("th",null,"Себестоимость, руб.",-1),rt=t("th",null,"Группа товаров",-1),dt=t("th",null,"В продаже?",-1),ut={class:"card-footer"},_t={class:"col-xl-6"},mt={class:"card"},ht={class:"card-body mb-4 text-center"},vt=t("h5",{class:"card-title"},"Изображение продукта",-1),pt=["src","alt"],yt=t("hr",null,null,-1),It={__name:"View",setup(bt){const i=L(),r=M(),y=N(),b=S(),{get:f}=G(),g=+i.params.id,w=y.getUser.role,k=u(()=>w===E.PRICE_ADMIN),e=D({});V(async()=>{await m(g)});const m=async h=>{const d=await f(`${A.PRODUCT}/${h}`,{params:{category:!0}});d.status==="success"&&(e.value=d.data)};B(()=>i.params.id,()=>{m(i.params.id)});const x=u(()=>Object.keys(e.value).length!==0),I=u(()=>e.value.image?`${F}${e.value.image}`:[H]),P=()=>{r.push({name:"Product.View",params:{id:e.value.prev}})},R=()=>{r.push({name:"Product.View",params:{id:e.value.next}})},T=()=>{window.print(),r.push("/").catch(()=>{})};return(h,d)=>{const C=U("RouterLink");return o(),n(p,null,[v(b).isLoading?(o(),n("div",J,[t("div",K,[t("h4",Q,[s(z)])])])):(o(),n(p,{key:1},[x.value?(o(),n("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("h3",et,a(e.value.name),1)]),t("div",st,[t("table",at,[t("tbody",null,[t("tr",null,[ot,t("td",null,a(e.value.id),1)]),t("tr",null,[nt,t("td",null,a(e.value.name),1)]),t("tr",null,[lt,t("td",null,a(v(W)(e.value.weight)),1)]),k.value?(o(),n("tr",ct,[it,t("td",null,a(e.value.price),1)])):O("",!0),t("tr",null,[rt,t("td",null,a(e.value.categoryName),1)]),t("tr",null,[dt,t("td",null,[s(q,{"is-active":e.value.isActive},null,8,["is-active"])])])])])]),t("div",ut,[s(_,{onClick:P,class:"btn-outline-secondary",disabled:e.value.prev===null},{default:l(()=>[c("Пред.")]),_:1},8,["disabled"]),s(_,{onClick:R,class:"btn-outline-secondary mx-2",disabled:e.value.next===null},{default:l(()=>[c("След.")]),_:1},8,["disabled"])])])]),t("div",_t,[t("div",mt,[t("div",ht,[vt,t("img",{src:I.value,alt:e.value.name,class:"img-thumbnail img-fluid"},null,8,pt)])])])])):(o(),$(j,{key:1,class:"mt-3"}))],64)),yt,s(_,{onClick:T,class:"btn-secondary"},{default:l(()=>[c("Print")]),_:1}),s(C,{to:{name:"Product.Index"},class:"btn btn-secondary my-2",role:"button"},{default:l(()=>[c("Обратно на Ассортимент ")]),_:1})],64)}}};export{It as default};
