import{u as A,a as k,r as p,e as x,Y as C,d as v,c as n,f as s,g as l,w as r,F as h,h as R,t as c,i as B,j as o,k as L,o as i}from"./app-CvDqXEOd.js";import{u as N}from"./useArrayHandlers-Dmi2z74m.js";import{u as U}from"./useHttpService-Cv4QBHm9.js";import{_ as M,a as y}from"./TheFilter-VzPJfpVU.js";import{_ as $}from"./TheCheckbox-D3tzlK-V.js";import{_ as E}from"./TheBadge-BBHb-MvK.js";const F={class:"row my-3"},H={class:"col-12"},I={class:"col-md-4 mb-2"},K={class:"col-md-4 mb-2"},T={class:"col-md-4 mb-2"},j={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-md-3 row-cols-sm-2 row-cols-1 g-3"},D={class:"card mb-0"},G={class:"card-header"},O={class:"card-body mt-3"},Y={class:"mb-0 list-unstyled"},q=s("strong",null,"Регион",-1),z=s("strong",null,"Город",-1),J=s("strong",null,"Работает",-1),P={class:"card-footer"},Q={key:1,class:"row mb-4"},W={class:"col-12"},X={class:"mt-3 lead"},Z={class:"row my-4"},ss={class:"col-12"},es={class:"fw-bold"},is={__name:"Index",setup(ts){A();const f=k(),d=N(),{get:g}=U(),_=p({customers:[]}),t=p({name:"",city:"",isActive:!1});x(async()=>{await w()});const w=async()=>{const{data:u}=await g(C.CUSTOMER,{params:{city:!0}});_.customers=u.customers},V=()=>{d.resetSearchKeys(t),d.resetSortKeys()},S=v(()=>d.sortArrayByStringColumn(_.customers,"name")),m=v(()=>d.filterArray(S.value,t));return(u,a)=>{const b=L("RouterLink");return i(),n(h,null,[s("div",F,[s("div",H,[l(M,{onResetFilter:V},{default:r(()=>[s("div",I,[l(y,{modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.name=e),placeholder:"Поиск по названию"},{default:r(()=>[o(" Контрагент ")]),_:1},8,["modelValue"])]),s("div",K,[l(y,{modelValue:t.city,"onUpdate:modelValue":a[1]||(a[1]=e=>t.city=e),placeholder:"Поиск по городу"},{default:r(()=>[o(" Город ")]),_:1},8,["modelValue"])]),s("div",T,[l($,{id:"is_active",modelValue:t.isActive,"onUpdate:modelValue":a[2]||(a[2]=e=>t.isActive=e)},{default:r(()=>[o(" Показать только активных ")]),_:1},8,["modelValue"])])]),_:1})])]),m.value.length>0?(i(),n("div",j,[(i(!0),n(h,null,R(m.value,e=>(i(),n("div",{class:"col",key:e.id},[s("div",D,[s("h5",G,c(e.name),1),s("div",O,[s("ul",Y,[s("li",null,[q,o(": "+c(e.city.regionName),1)]),s("li",null,[z,o(": "+c(e.city.name),1)]),s("li",null,[J,o(": "),l(E,{"is-active":e.isActive},null,8,["is-active"])])])]),s("div",P,[l(b,{to:{name:"Manager.Customer.View",params:{id:e.id}},class:"btn btn-outline-primary"},{default:r(()=>[o("Подробнее")]),_:2},1032,["to"])])])]))),128))])):(i(),n("div",Q,[s("div",W,[s("p",X,c(B(f).isLoading?"Подождите, загружаю...":"Записей не найдено..."),1)])])),s("div",Z,[s("div",ss,[s("p",null,[o("Всего записей: "),s("span",es,c(m.value.length),1)])])])],64)}}};export{is as default};
