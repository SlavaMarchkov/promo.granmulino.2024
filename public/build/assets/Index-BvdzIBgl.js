import{u as k,a as R,r as f,e as x,a1 as B,d as v,c as d,f as s,g as a,w as t,F as h,h as L,t as n,i as $,j as l,k as C,o as i,l as E,x as I}from"./app-BPdZrYo3.js";import{u as N}from"./useArrayHandlers-D3DGTb70.js";import{u as U}from"./useHttpService-BNZ4gPHT.js";import{_ as F,a as y}from"./TheFilter-BiC8Pmxx.js";import{_ as H}from"./TheCheckbox-CGFEuL4J.js";import{_ as M}from"./TheBadge-DfL1MJO3.js";import{_ as m,a as K}from"./TwoColumnRow-DgtO-1NF.js";const T={class:"row my-3"},j={class:"col-12"},z={class:"col-md-4 mb-2"},D={class:"col-md-4 mb-2"},G={class:"col-md-4 mb-2"},q={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-md-3 row-cols-sm-2 row-cols-1 g-3"},J={class:"mb-0"},O={class:"mb-0"},P={key:1,class:"row mb-4"},Q={class:"col-12"},W={class:"mt-3 lead"},X={class:"row my-4"},Y={class:"col-12"},Z={class:"fw-bold"},ie={__name:"Index",setup(ee){k();const g=R(),c=N(),{get:w}=U(),u=f({retailers:[]}),o=f({name:"",city:"",isActive:!1});x(async()=>{await b()});const b=async()=>{const{data:p}=await w(B.RETAILER);u.retailers=p.retailers},V=()=>{c.resetSearchKeys(o),c.resetSortKeys()},A=v(()=>c.sortArrayByStringColumn(u.retailers,"name")),_=v(()=>c.filterArray(A.value,o));return(p,r)=>{const S=C("RouterLink");return i(),d(h,null,[s("div",T,[s("div",j,[a(F,{onResetFilter:V},{default:t(()=>[s("div",z,[a(y,{modelValue:o.name,"onUpdate:modelValue":r[0]||(r[0]=e=>o.name=e),placeholder:"Поиск по названию"},{default:t(()=>[l(" Торговая сеть ")]),_:1},8,["modelValue"])]),s("div",D,[a(y,{modelValue:o.city,"onUpdate:modelValue":r[1]||(r[1]=e=>o.city=e),placeholder:"Поиск по городу"},{default:t(()=>[l(" Город ")]),_:1},8,["modelValue"])]),s("div",G,[a(H,{id:"is_active",modelValue:o.isActive,"onUpdate:modelValue":r[2]||(r[2]=e=>o.isActive=e)},{default:t(()=>[l(" Показать только активных ")]),_:1},8,["modelValue"])])]),_:1})])]),_.value.length>0?(i(),d("div",q,[(i(!0),d(h,null,L(_.value,e=>(i(),E(K,{key:e.id,"header-classes":["bg-light"],"with-footer":""},{header:t(()=>[s("h4",J,n(e.name),1),s("p",O,[s("span",{class:I(["badge","rounded",e.typeBgColor])},n(e.label),3)])]),body:t(()=>[a(m,{title:"Дистрибутор"},{default:t(()=>[l(n(e.customer),1)]),_:2},1024),a(m,{title:"Город"},{default:t(()=>[l(n(e.city),1)]),_:2},1024),a(m,{title:"Работает"},{default:t(()=>[a(M,{"is-active":e.isActive},null,8,["is-active"])]),_:2},1024)]),footer:t(()=>[a(S,{to:{name:"Manager.Retailer.View",params:{id:e.id}},class:"btn btn-outline-primary"},{default:t(()=>[l("Подробнее ")]),_:2},1032,["to"])]),_:2},1024))),128))])):(i(),d("div",P,[s("div",Q,[s("p",W,n($(g).isLoading?"Подождите, загружаю...":"Записей не найдено..."),1)])])),s("div",X,[s("div",Y,[s("p",null,[l("Всего записей: "),s("span",Z,n(_.value.length),1)])])])],64)}}};export{ie as default};
