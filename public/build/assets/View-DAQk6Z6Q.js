import{_ as R,o as t,c as a,f as o,a as B,z as _,e as C,d as A,A as P,B as L,i as N,g as d,F as m,w as n,l as v,G as T,H as E,k as F,t as I,h as V,m as U,T as H,Y as J,j as y,Z as i,n as j}from"./app-LDVDDXIB.js";import{u as G}from"./useHttpService-H3Bhthf8.js";import{u as K}from"./useArrayHandlers-JXOu8LuP.js";import{T as z}from"./TheSpinner-8yGDkJ68.js";import{_ as Y}from"./TheCard-DltuzUPB.js";const Z={},q=o("th",{scope:"row"},"1",-1),Q=o("td",null,"Brandon Jacob",-1),W=o("td",null,"Designer",-1),X=o("td",null,"28",-1),oo=o("td",null,"2016-05-25",-1),to=[q,Q,W,X,oo];function so(f,h){return t(),a("tr",null,to)}const eo=R(Z,[["render",so]]),ao={key:0,class:"row"},lo={class:"col-12"},co={class:"my-4"},no={key:0,class:"row"},ro={class:"col-12"},io=o("h5",{class:"mb-0 card-title p-0"},"Заголовок",-1),po=o("div",{class:"row"},[o("div",{class:"col-md-6"},[o("table",{class:"table table-striped"},[o("thead",null,[o("tr",null,[o("th",{scope:"col"},"#"),o("th",{scope:"col"},"Name"),o("th",{scope:"col"},"Position"),o("th",{scope:"col"},"Age"),o("th",{scope:"col"},"Start Date")])]),o("tbody",null,[o("tr",null,[o("th",{scope:"row"},"1"),o("td",null,"Brandon Jacob"),o("td",null,"Designer"),o("td",null,"28"),o("td",null,"2016-05-25")]),o("tr",null,[o("th",{scope:"row"},"2"),o("td",null,"Bridie Kessler"),o("td",null,"Developer"),o("td",null,"35"),o("td",null,"2014-12-05")])])])]),o("div",{class:"col-md-6"},[o("table",{class:"table table-striped"},[o("thead",null,[o("tr",null,[o("th",{scope:"col"},"#"),o("th",{scope:"col"},"Name"),o("th",{scope:"col"},"Position"),o("th",{scope:"col"},"Age"),o("th",{scope:"col"},"Start Date")])]),o("tbody",null,[o("tr",null,[o("th",{scope:"row"},"1"),o("td",null,"Brandon Jacob"),o("td",null,"Designer"),o("td",null,"28"),o("td",null,"2016-05-25")]),o("tr",null,[o("th",{scope:"row"},"2"),o("td",null,"Bridie Kessler"),o("td",null,"Developer"),o("td",null,"35"),o("td",null,"2014-12-05")])])])])],-1),uo={class:"row"},_o={id:"promoDetails",class:"accordion"},mo={class:"accordion-item"},ho=o("h2",{id:"promoComments",class:"accordion-header"},[o("button",{"aria-controls":"collapsePromoComments","aria-expanded":"false",class:"accordion-button collapsed","data-bs-target":"#collapsePromoComments","data-bs-toggle":"collapse",type:"button"},[o("span",{class:"card-title p-0 m-0"},"Механика промо-акции")])],-1),bo={id:"collapsePromoComments","aria-labelledby":"promoComments",class:"accordion-collapse collapse","data-bs-parent":"#promoDetails"},Po={class:"accordion-body"},vo=o("div",{class:"accordion-item"},[o("h2",{id:"promoMark",class:"accordion-header"},[o("button",{"aria-controls":"collapsePromoMark","aria-expanded":"false",class:"accordion-button collapsed","data-bs-target":"#collapsePromoMark","data-bs-toggle":"collapse",type:"button"},[o("span",{class:"card-title p-0 m-0"},"Оценки промо-акции")])]),o("div",{id:"collapsePromoMark","aria-labelledby":"promoMark",class:"accordion-collapse collapse","data-bs-parent":"#promoDetails"},[o("div",{class:"accordion-body"}," Вывод оценок ")])],-1),yo={key:0,class:"accordion-item"},fo=o("h2",{id:"promoProducts",class:"accordion-header"},[o("button",{"aria-controls":"collapsePromoProducts","aria-expanded":"true",class:"accordion-button","data-bs-target":"#collapsePromoProducts","data-bs-toggle":"collapse",type:"button"},[o("span",{class:"card-title p-0 m-0"},"Акционная продукция")])],-1),go={id:"collapsePromoProducts","aria-labelledby":"promoProducts",class:"accordion-collapse collapse show","data-bs-parent":"#promoDetails"},wo={class:"accordion-body"},ko={class:"table table-striped"},$o=o("thead",null,[o("tr",null,[o("th",{scope:"col"},"#"),o("th",{scope:"col"},"Name"),o("th",{scope:"col"},"Position"),o("th",{scope:"col"},"Age"),o("th",{scope:"col"},"Start Date")])],-1),Do=o("hr",null,null,-1),Ao={__name:"View",setup(f){const h=T();E();const g=B();K();const{get:p,print:So,download:w,update:xo}=G(),c=+h.params.id,r=_({}),u=_([]),k=_([]);C(async()=>{await D(c)});const $=A(()=>Object.keys(r.value).length!==0),D=async s=>{const{status:l,data:e}=await p(`${P.PROMO}/${s}`);l==="success"&&(r.value=e)};L(()=>r.value.promoType,s=>{switch(s){case"DISCOUNT":S(c);break;case"SALES_PEOPLE_BOOST":x(c);break}});const S=async s=>{const{status:l,data:e}=await p(`${i.PROMO}/${s}${i.PRODUCT}`);l==="success"&&(u.value=e)},x=async s=>{const{status:l,data:e}=await p(`${i.PROMO}/${s}${i.SELLER}`);l==="success"&&(k.value=e)},O=async()=>{await w(`${P.PROMO}/${c}/print`,`promo_${c}_export.pdf`)};return(s,l)=>{const e=F("RouterLink");return t(),a(m,null,[N(g).isLoading?(t(),a("div",ao,[o("div",lo,[o("h4",co,[d(z)])])])):(t(),a(m,{key:1},[$.value?(t(),a("div",no,[o("div",ro,[d(Y,{"with-footer":""},{header:n(()=>[io]),body:n(()=>[po,o("div",uo,[o("div",_o,[o("div",mo,[ho,o("div",bo,[o("div",Po,I(r.value.comments),1)])]),vo,u.value.length>0?(t(),a("div",yo,[fo,o("div",go,[o("div",wo,[o("table",ko,[$o,o("tbody",null,[(t(!0),a(m,null,V(u.value,(b,M)=>(t(),v(eo,{key:b.id,index:M,product:b},null,8,["index","product"]))),128))])])])])])):U("",!0)])])]),footer:n(()=>[d(H,{class:"btn-danger",onClick:J(O,["prevent"])},{default:n(()=>[y("Экспорт в PDF ")]),_:1})]),_:1})])])):(t(),v(j,{key:1,class:"mt-3"}))],64)),Do,d(e,{to:{name:"Promo.Index"},class:"btn btn-secondary my-2",role:"button"},{default:n(()=>[y("Обратно на Промо-акции ")]),_:1})],64)}}};export{Ao as default};
