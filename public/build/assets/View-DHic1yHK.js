import{o as s,c as i,g as e,t as k,s as q,v as I,h as u,w as y,x,T as A,r as L,l as g,y as T,z as M,p as P,F as S,d as C,u as O,A as E,j as R,B as N,M as _,a as V,b as F,C as $,e as B,D,f as j,k as z,q as J,E as W,G as Y,m as H}from"./app-BiIGfiXh.js";const G={class:"input-group mb-2"},K={class:"input-group-text"},Q=["disabled"],X={__name:"SellerItem",props:{seller:{type:Object,required:!0},index:{type:Number,default:1}},emits:["activateSeller","updateSeller"],setup(b,{emit:v}){const a=b,m=v,c=()=>{m("activateSeller",a.seller)},f=()=>{m("updateSeller",a.seller)};return(t,r)=>(s(),i("div",G,[e("span",K,k(b.index+1),1),q(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=p=>a.seller.name=p),disabled:a.seller.isActive===!1},null,8,Q),[[I,a.seller.name]]),u(A,{onClick:f,class:"btn-outline-primary fs-5 pt-1 pb-0",disabled:a.seller.isActive===!1},{default:y(()=>[e("i",{class:x(a.seller.isActive!==!1?"bi-check-lg":"bi-dash")},null,2)]),_:1},8,["disabled"]),u(A,{onClick:c,class:x(["fs-5 pt-1 pb-0",a.seller.isActive===!1?"btn-outline-success":"btn-outline-danger"])},{default:y(()=>[e("i",{class:x(a.seller.isActive!==!1?"bi-x-lg":"bi-arrow-counterclockwise")},null,2)]),_:1},8,["class"])]))}},Z={class:"input-group mb-2"},ee={__name:"AddSellerItem",props:{customerId:{type:Number,required:!0}},emits:["saveSeller"],setup(b,{emit:v}){const a=b,m=()=>({customerId:a.customerId,supervisorId:"",name:"",isActive:!0,isSupervisor:!1}),c=L({seller:m()}),f=v,t=()=>{f("saveSeller",c.seller),c.seller=m()};return(r,p)=>(s(),i(S,null,[u(T,{for:"sellerName",required:""},{default:y(()=>[g("Новый торговый представитель или супервайзер")]),_:1}),e("div",Z,[u(M,{id:"sellerName",modelValue:c.seller.name,"onUpdate:modelValue":p[0]||(p[0]=h=>c.seller.name=h),placeholder:"ФИО торгового представителя"},null,8,["modelValue"]),u(A,{onClick:t,class:"btn-success"},{default:y(()=>[g("Добавить")]),_:1})]),u(P,{id:"isSupervisor",modelValue:c.seller.isSupervisor,"onUpdate:modelValue":p[1]||(p[1]=h=>c.seller.isSupervisor=h)},{default:y(()=>[g("Отметить, если ТП - это супервайзер")]),_:1},8,["modelValue"])],64))}},le={key:0,class:"row"},se={key:1,class:"row"},ae=e("p",null,[g("Команда торговых представителей ещё не наполнена!"),e("br"),g("Наполните команду, вводя поочерёдно ФИО торговых представителей в поле ниже.")],-1),te=[ae],oe=e("hr",null,null,-1),ce={__name:"TheSellers",props:{customerId:{type:Number,required:!0},sellers:{type:Array,required:!0,default:[]}},emits:["updateSellers"],setup(b,{emit:v}){const{post:a,update:m}=C(),c=O(),f=b,t=v,r=async n=>{let o=`${_.CUSTOMER}/${f.customerId}/`;o+=n.isSupervisor?[_.CUSTOMER_SUPERVISOR]:[_.CUSTOMER_SELLER];const{status:l,data:d}=await a(o,n);l==="success"&&(c.clear(),t("updateSellers",d))},p=async n=>{const{status:o,data:l}=await m(`${_.CUSTOMER_SELLER}/${n.id}`,n);o==="success"&&(c.clear(),t("updateSellers",l))},h=async n=>{const{status:o,data:l}=await m(`${_.CUSTOMER_SELLER}/${n.id}`,{...n,isActive:!n.isActive});o==="success"&&t("updateSellers",l)};return(n,o)=>(s(),i(S,null,[u(E),b.sellers.length>0?(s(),i("div",le,[(s(!0),i(S,null,R(b.sellers,(l,d)=>(s(),N(X,{key:l.id,seller:l,index:d,onActivateSeller:h,onUpdateSeller:p},null,8,["seller","index"]))),128))])):(s(),i("div",se,te)),oe,u(ee,{"customer-id":f.customerId,onSaveSeller:r},null,8,["customer-id"])],64))}},ie={key:0,class:"row"},re=e("div",{class:"col-12"},[e("div",{class:"card"},[e("div",{class:"card-body"},[e("h4",{class:"my-4"},"Загрузка...")])])],-1),ne=[re],de={key:0,class:"row profile"},ue={class:"col-xl-4"},me={class:"card"},pe={class:"card-body profile-card pt-4 d-flex flex-column"},be={class:"mb-3"},ve={class:"card"},fe=e("div",{class:"card-header h4"},"Торговые сети",-1),_e={class:"card-body mt-3"},ge={key:0,class:"list-group"},he={class:"fw-bold"},ye=e("span",{class:"text-primary"},"Подробнее",-1),ke={key:1,class:"mb-0"},Se={class:"col-xl-8"},we={class:"card"},xe={class:"card-body pt-3"},Ae=e("ul",{class:"nav nav-tabs nav-tabs-bordered",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#profile-overview","aria-selected":"true",role:"tab"},"Overview")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#profile-edit","aria-selected":"false",tabindex:"-1",role:"tab"},"Edit Profile")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#profile-settings","aria-selected":"false",tabindex:"-1",role:"tab"},"Settings")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#the-sellers","aria-selected":"false",tabindex:"-1",role:"tab"},"Команда ТП")])],-1),$e={class:"tab-content pt-2"},Ce=e("div",{class:"tab-pane fade show active profile-overview",id:"profile-overview",role:"tabpanel"},[e("h5",{class:"card-title"},"About"),e("p",{class:"small fst-italic"},"Sunt est soluta temporibus accusantium neque nam maiores cumque temporibus. Tempora libero non est unde veniam est qui dolor. Ut sunt iure rerum quae quisquam autem eveniet perspiciatis odit. Fuga sequi sed ea saepe at unde."),e("h5",{class:"card-title"},"Profile Details"),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Full Name"),e("div",{class:"col-lg-9 col-md-8"},"Kevin Anderson")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Company"),e("div",{class:"col-lg-9 col-md-8"},"Lueilwitz, Wisoky and Leuschke")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Job"),e("div",{class:"col-lg-9 col-md-8"},"Web Designer")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Country"),e("div",{class:"col-lg-9 col-md-8"},"USA")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Address"),e("div",{class:"col-lg-9 col-md-8"},"A108 Adam Street, New York, NY 535022")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Phone"),e("div",{class:"col-lg-9 col-md-8"},"(436) 486-3538 x29071")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Email"),e("div",{class:"col-lg-9 col-md-8"},"k.anderson@example.com")])],-1),Ee=e("div",{class:"tab-pane fade profile-edit pt-3",id:"profile-edit",role:"tabpanel"},[e("form",null,[e("div",{class:"row mb-3"},[e("label",{for:"profileImage",class:"col-md-4 col-lg-3 col-form-label"},"Profile Image"),e("div",{class:"col-md-8 col-lg-9"},[e("img",{src:"assets/img/profile-img.jpg",alt:"Profile"}),e("div",{class:"pt-2"},[e("a",{href:"#",class:"btn btn-primary btn-sm",title:"Upload new profile image"},[e("i",{class:"bi bi-upload"})]),e("a",{href:"#",class:"btn btn-danger btn-sm",title:"Remove my profile image"},[e("i",{class:"bi bi-trash"})])])])]),e("div",{class:"row mb-3"},[e("label",{for:"fullName",class:"col-md-4 col-lg-3 col-form-label"},"Full Name"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"fullName",type:"text",class:"form-control",id:"fullName",value:"Kevin Anderson"})])]),e("div",{class:"row mb-3"},[e("label",{for:"about",class:"col-md-4 col-lg-3 col-form-label"},"About"),e("div",{class:"col-md-8 col-lg-9"},[e("textarea",{name:"about",class:"form-control",id:"about",style:{height:"100px"}},"Sunt est soluta temporibus accusantium neque nam maiores cumque temporibus. Tempora libero non est unde veniam est qui dolor. Ut sunt iure rerum quae quisquam autem eveniet perspiciatis odit. Fuga sequi sed ea saepe at unde.")])]),e("div",{class:"row mb-3"},[e("label",{for:"company",class:"col-md-4 col-lg-3 col-form-label"},"Company"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"company",type:"text",class:"form-control",id:"company",value:"Lueilwitz, Wisoky and Leuschke"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Job",class:"col-md-4 col-lg-3 col-form-label"},"Job"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"job",type:"text",class:"form-control",id:"Job",value:"Web Designer"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Country",class:"col-md-4 col-lg-3 col-form-label"},"Country"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"country",type:"text",class:"form-control",id:"Country",value:"USA"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Address",class:"col-md-4 col-lg-3 col-form-label"},"Address"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"address",type:"text",class:"form-control",id:"Address",value:"A108 Adam Street, New York, NY 535022"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Phone",class:"col-md-4 col-lg-3 col-form-label"},"Phone"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"phone",type:"text",class:"form-control",id:"Phone",value:"(436) 486-3538 x29071"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Email",class:"col-md-4 col-lg-3 col-form-label"},"Email"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"email",type:"email",class:"form-control",id:"Email",value:"k.anderson@example.com"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Twitter",class:"col-md-4 col-lg-3 col-form-label"},"Twitter Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"twitter",type:"text",class:"form-control",id:"Twitter",value:"https://twitter.com/#"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Facebook",class:"col-md-4 col-lg-3 col-form-label"},"Facebook Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"facebook",type:"text",class:"form-control",id:"Facebook",value:"https://facebook.com/#"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Instagram",class:"col-md-4 col-lg-3 col-form-label"},"Instagram Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"instagram",type:"text",class:"form-control",id:"Instagram",value:"https://instagram.com/#"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Linkedin",class:"col-md-4 col-lg-3 col-form-label"},"Linkedin Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"linkedin",type:"text",class:"form-control",id:"Linkedin",value:"https://linkedin.com/#"})])]),e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary"},"Save Changes")])])],-1),Re=e("div",{class:"tab-pane fade pt-3",id:"profile-settings",role:"tabpanel"},[e("form",null,[e("div",{class:"row mb-3"},[e("label",{for:"fullName",class:"col-md-4 col-lg-3 col-form-label"},"Email Notifications"),e("div",{class:"col-md-8 col-lg-9"},[e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"changesMade",checked:""}),e("label",{class:"form-check-label",for:"changesMade"}," Changes made to your account ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"newProducts",checked:""}),e("label",{class:"form-check-label",for:"newProducts"}," Information on new products and services ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"proOffers"}),e("label",{class:"form-check-label",for:"proOffers"}," Marketing and promo offers ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"securityNotify",checked:"",disabled:""}),e("label",{class:"form-check-label",for:"securityNotify"}," Security alerts ")])])]),e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary"},"Save Changes")])])],-1),Ne={class:"tab-pane fade pt-3",id:"the-sellers",role:"tabpanel"},Ue=e("hr",null,null,-1),Ie={__name:"View",setup(b){const v=W();Y();const a=V(),m=F(),{get:c}=C(),f=+v.params.id,t=$({}),r=$([]);B(async()=>{await p(f)});const p=async o=>{await c(`${_.CUSTOMER}/${o}`,{params:{city:!0,region:!0,retailers:!0,customer_supervisors:!1,customer_sellers:!1}}).then(({status:l,data:d})=>{l==="success"&&(t.value=d)}).then(async()=>await c(`${_.CUSTOMER}/${o}/${_.CUSTOMER_SUPERVISOR}`,{params:{sellers:!0}})).then(({status:l,data:d})=>{l==="success"&&(r.value=d.sellers)})};D(()=>v.params.id,()=>{p(v.params.id)});const h=j(()=>Object.keys(t.value).length!==0),n=o=>{const l=r.value.findIndex(w=>w.id===o.id);l===-1?r.value.push(o):r.value[l]=o;const d=m.sortArrayByStringColumn(r.value,"name");r.value=m.sortArrayByBoolean(d,"isActive")};return(o,l)=>{const d=H("RouterLink");return s(),i(S,null,[z(a).isLoading?(s(),i("div",ie,ne)):(s(),i(S,{key:1},[h.value?(s(),i("div",de,[e("div",ue,[e("div",me,[e("div",pe,[e("h1",be,k(t.value.name),1),e("h3",null,"Регион: "+k(t.value.region.name),1),e("h3",null,"Город: "+k(t.value.city.name),1),e("h3",null,[g("Работает: "),u(J,{"is-active":t.value.isActive},null,8,["is-active"])])])]),e("div",ve,[fe,e("div",_e,[t.value.retailers.length>0?(s(),i("div",ge,[(s(!0),i(S,null,R(t.value.retailers,(w,U)=>(s(),i("button",{key:w.id,class:"list-group-item list-group-item-action",type:"button"},[u(d,{to:{name:"Manager.Retailer.View",params:{id:w.id}},class:"d-flex justify-content-between text-black"},{default:y(()=>[e("span",null,[g(k(U+1)+". ",1),e("span",he,k(w.name),1)]),ye]),_:2},1032,["to"])]))),128))])):(s(),i("p",ke,"Дистрибутор не имеет торговых сетей."))])])]),e("div",Se,[e("div",we,[e("div",xe,[Ae,e("div",$e,[Ce,Ee,Re,e("div",Ne,[u(ce,{"customer-id":f,sellers:r.value,onUpdateSellers:n},null,8,["sellers"])])])])])])])):(s(),N(E,{key:1,class:"mt-3"}))],64)),Ue,u(d,{to:{name:"Manager.Customer.Index"},class:"btn btn-secondary my-2",role:"button"},{default:y(()=>[g("Обратно на Мои Контрагенты ")]),_:1})],64)}}};export{Ie as default};
