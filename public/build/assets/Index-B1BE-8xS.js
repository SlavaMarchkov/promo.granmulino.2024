import{u as A,a as k,b as x,d as C,r as h,e as R,M as B,f as p,c as l,g as s,h as n,w as c,i as L,F as v,j as M,t as r,k as N,l as o,m as U,o as d,n as y,p as E}from"./app-BnJxUDi9.js";const F={class:"row my-3"},H={class:"col-12"},I={class:"col-md-4 mb-2"},$={class:"col-md-4 mb-2"},K={class:"col-md-4 mb-2"},T={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-md-3 row-cols-sm-2 row-cols-1 g-3"},j={class:"card mb-0"},D={class:"card-header"},G={class:"card-body mt-3"},O={class:"mb-0 list-unstyled"},q=s("strong",null,"Регион",-1),z=s("strong",null,"Город",-1),J={class:"card-footer"},P={key:1,class:"row mb-4"},Q={class:"col-12"},W={class:"mt-3 lead"},X={class:"row my-4"},Y={class:"col-12"},Z={class:"fw-bold"},ts={__name:"Index",setup(ss){A();const f=k(),i=x(),{get:g}=C(),u=h({customers:[]}),t=h({name:"",city:"",isActive:!1});R(async()=>{await w()});const w=async()=>{const{data:m}=await g(B.CUSTOMER,{params:{city:!0}});u.customers=m.customers},V=()=>{i.resetSearchKeys(t),i.resetSortKeys()},S=p(()=>i.sortArrayByStringColumn(u.customers,"name")),_=p(()=>i.filterArray(S.value,t));return(m,a)=>{const b=U("RouterLink");return d(),l(v,null,[s("div",F,[s("div",H,[n(L,{onResetFilter:V},{default:c(()=>[s("div",I,[n(y,{modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.name=e),placeholder:"Поиск по названию"},{default:c(()=>[o(" Контрагент ")]),_:1},8,["modelValue"])]),s("div",$,[n(y,{modelValue:t.city,"onUpdate:modelValue":a[1]||(a[1]=e=>t.city=e),placeholder:"Поиск по городу"},{default:c(()=>[o(" Город ")]),_:1},8,["modelValue"])]),s("div",K,[n(E,{id:"is_active",modelValue:t.isActive,"onUpdate:modelValue":a[2]||(a[2]=e=>t.isActive=e)},{default:c(()=>[o(" Показать только активных ")]),_:1},8,["modelValue"])])]),_:1})])]),_.value.length>0?(d(),l("div",T,[(d(!0),l(v,null,M(_.value,e=>(d(),l("div",{class:"col",key:e.id},[s("div",j,[s("h5",D,r(e.name),1),s("div",G,[s("ul",O,[s("li",null,[q,o(": "+r(e.city.regionName),1)]),s("li",null,[z,o(": "+r(e.city.name),1)])])]),s("div",J,[n(b,{to:{name:"Manager.Customer.View",params:{id:e.id}},class:"btn btn-outline-primary"},{default:c(()=>[o("Подробнее")]),_:2},1032,["to"])])])]))),128))])):(d(),l("div",P,[s("div",Q,[s("p",W,r(N(f).isLoading?"Подождите, загружаю...":"Записей не найдено..."),1)])])),s("div",X,[s("div",Y,[s("p",null,[o("Всего записей: "),s("span",Z,r(_.value.length),1)])])])],64)}}};export{ts as default};
