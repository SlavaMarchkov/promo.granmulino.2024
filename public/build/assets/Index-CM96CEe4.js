import{u as A,a as k,b as x,d as C,r as v,e as R,M as B,f as h,c as n,g as s,h as l,w as c,i as L,F as p,j as M,t as r,k as N,l as o,m as U,o as i,n as y,p as $,q as E}from"./app-BiIGfiXh.js";const F={class:"row my-3"},H={class:"col-12"},I={class:"col-md-4 mb-2"},K={class:"col-md-4 mb-2"},T={class:"col-md-4 mb-2"},j={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-md-3 row-cols-sm-2 row-cols-1 g-3"},q={class:"card mb-0"},D={class:"card-header"},G={class:"card-body mt-3"},O={class:"mb-0 list-unstyled"},z=s("strong",null,"Регион",-1),J=s("strong",null,"Город",-1),P=s("strong",null,"Работает",-1),Q={class:"card-footer"},W={key:1,class:"row mb-4"},X={class:"col-12"},Y={class:"mt-3 lead"},Z={class:"row my-4"},ss={class:"col-12"},es={class:"fw-bold"},as={__name:"Index",setup(ts){A();const f=k(),d=x(),{get:g}=C(),u=v({customers:[]}),t=v({name:"",city:"",isActive:!1});R(async()=>{await w()});const w=async()=>{const{data:m}=await g(B.CUSTOMER,{params:{city:!0}});u.customers=m.customers},V=()=>{d.resetSearchKeys(t),d.resetSortKeys()},S=h(()=>d.sortArrayByStringColumn(u.customers,"name")),_=h(()=>d.filterArray(S.value,t));return(m,a)=>{const b=U("RouterLink");return i(),n(p,null,[s("div",F,[s("div",H,[l(L,{onResetFilter:V},{default:c(()=>[s("div",I,[l(y,{modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.name=e),placeholder:"Поиск по названию"},{default:c(()=>[o(" Контрагент ")]),_:1},8,["modelValue"])]),s("div",K,[l(y,{modelValue:t.city,"onUpdate:modelValue":a[1]||(a[1]=e=>t.city=e),placeholder:"Поиск по городу"},{default:c(()=>[o(" Город ")]),_:1},8,["modelValue"])]),s("div",T,[l($,{id:"is_active",modelValue:t.isActive,"onUpdate:modelValue":a[2]||(a[2]=e=>t.isActive=e)},{default:c(()=>[o(" Показать только активных ")]),_:1},8,["modelValue"])])]),_:1})])]),_.value.length>0?(i(),n("div",j,[(i(!0),n(p,null,M(_.value,e=>(i(),n("div",{class:"col",key:e.id},[s("div",q,[s("h5",D,r(e.name),1),s("div",G,[s("ul",O,[s("li",null,[z,o(": "+r(e.city.regionName),1)]),s("li",null,[J,o(": "+r(e.city.name),1)]),s("li",null,[P,o(": "),l(E,{"is-active":e.isActive},null,8,["is-active"])])])]),s("div",Q,[l(b,{to:{name:"Manager.Customer.View",params:{id:e.id}},class:"btn btn-outline-primary"},{default:c(()=>[o("Подробнее")]),_:2},1032,["to"])])])]))),128))])):(i(),n("div",W,[s("div",X,[s("p",Y,r(N(f).isLoading?"Подождите, загружаю...":"Записей не найдено..."),1)])])),s("div",Z,[s("div",ss,[s("p",null,[o("Всего записей: "),s("span",es,r(_.value.length),1)])])])],64)}}};export{as as default};
