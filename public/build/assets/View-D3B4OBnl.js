import{o as i,c as d,f as e,t as U,s as O,L as P,X as A,g as m,w as _,x as L,T as k,l as T,F as N,h as D,m as Y,a as V,r as W,j as B,p as H,q as G,i as M,u as K,Z as I,n as F,Y as C,_ as X,y as R,e as Z,d as Q,G as ee,z as se,B as le,k as te}from"./app-CvDqXEOd.js";import{u as j}from"./useHttpService-Cv4QBHm9.js";import{u as oe}from"./useArrayHandlers-Dmi2z74m.js";import{_ as re}from"./TheCheckbox-D3tzlK-V.js";import{_ as ae}from"./TheBadge-BBHb-MvK.js";const ie={class:"input-group mb-2"},ce={class:"input-group-text"},ne=["disabled"],de=e("i",{class:"bi-arrow-up"},null,-1),ue=e("i",{class:"bi-arrow-down"},null,-1),pe=e("i",{class:"bi-trash"},null,-1),J={__name:"SellerItem",props:{seller:{type:Object,required:!0},index:{type:Number,default:1}},emits:["updateSeller","destroySeller"],setup(g,{emit:y}){const s=g,a=y,h=()=>{s.seller.isActive=!s.seller.isActive,a("updateSeller",s.seller)},f=()=>{a("updateSeller",s.seller)},c=()=>{s.seller.isSupervisor=!0,a("updateSeller",s.seller)},o=()=>{s.seller.supervisorId=null,a("updateSeller",s.seller)},u=()=>{a("destroySeller",s.seller)};return(b,p)=>(i(),d("div",null,[e("div",ie,[e("span",ce,U(g.index+1),1),O(e("input",{type:"text",class:"form-control","onUpdate:modelValue":p[0]||(p[0]=E=>s.seller.name=E),disabled:!s.seller.isActive,style:A({"cursor: not-allowed":!s.seller.isActive})},null,12,ne),[[P,s.seller.name]]),m(k,{onClick:f,class:"btn-outline-primary fs-5 pt-1 pb-0",disabled:!s.seller.isActive,style:A({"cursor: not-allowed":!s.seller.isActive}),title:"Сохранить изменения"},{default:_(()=>[e("i",{class:L(s.seller.isActive!==!1?"bi-check-lg":"bi-dash")},null,2)]),_:1},8,["disabled","style"]),s.seller.supervisorId===null?(i(),T(k,{key:0,onClick:c,class:"btn-outline-secondary fs-5 pt-1 pb-0",disabled:!s.seller.isActive,style:A({"cursor: not-allowed":!s.seller.isActive}),title:"Сделать супервайзером"},{default:_(()=>[de]),_:1},8,["disabled","style"])):(i(),T(k,{key:1,onClick:o,class:"btn-outline-secondary fs-5 pt-1 pb-0",disabled:!s.seller.isActive,style:A({"cursor: not-allowed":!s.seller.isActive}),title:"Переместить в ТП"},{default:_(()=>[ue]),_:1},8,["disabled","style"])),m(k,{onClick:h,class:L(["fs-5 pt-1 pb-0",s.seller.isActive===!1?"btn-outline-success":"btn-outline-danger"]),title:s.seller.isActive!==!1?"Деактивировать":"Активировать"},{default:_(()=>[e("i",{class:L(s.seller.isActive!==!1?"bi-x-lg":"bi-arrow-counterclockwise")},null,2)]),_:1},8,["class","title"]),m(k,{onClick:u,class:"btn-outline-danger fs-5 pt-1 pb-0",disabled:s.seller.isActive||s.seller.supervisorId!==null,style:A({"cursor: not-allowed":s.seller.isActive||s.seller.supervisorId!==null}),title:"Удалить"},{default:_(()=>[pe]),_:1},8,["disabled","style"])])]))}},ve={class:"input-group mb-2"},me={class:"input-group-text"},fe=["disabled"],be=e("i",{class:"bi-arrow-down"},null,-1),_e=e("i",{class:"bi-trash"},null,-1),ye={key:0,class:"ps-5"},ge={__name:"SupervisorItem",props:{supervisor:{type:Object,required:!0},index:{type:Number,default:1}},emits:["updateSeller","destroySeller","updateSupervisor","destroySupervisor"],setup(g,{emit:y}){const s=g,a=y,h=p=>{p.isSupervisor===!0&&(p.supervisorId=null),a("updateSeller",p)},f=p=>{a("destroySeller",p)},c=()=>{s.supervisor.isActive=!s.supervisor.isActive,a("updateSupervisor",s.supervisor)},o=()=>{a("updateSupervisor",s.supervisor)},u=()=>{s.supervisor.isSupervisor=!1,a("updateSupervisor",s.supervisor)},b=()=>{a("destroySupervisor",s.supervisor)};return(p,E)=>(i(),d("div",null,[e("div",ve,[e("span",me,U(g.index+1),1),O(e("input",{type:"text",class:"form-control fw-bold","onUpdate:modelValue":E[0]||(E[0]=S=>s.supervisor.name=S),disabled:!s.supervisor.isActive,style:A({"cursor: not-allowed":!s.supervisor.isActive})},null,12,fe),[[P,s.supervisor.name]]),m(k,{onClick:o,class:"btn-outline-primary fs-5 pt-1 pb-0",disabled:!s.supervisor.isActive,style:A({"cursor: not-allowed":!s.supervisor.isActive}),title:"Сохранить изменения"},{default:_(()=>[e("i",{class:L(s.supervisor.isActive!==!1?"bi-check-lg":"bi-dash")},null,2)]),_:1},8,["disabled","style"]),m(k,{onClick:u,class:"btn-outline-secondary fs-5 pt-1 pb-0",disabled:s.supervisor.sellers.length>0,style:A({"cursor: not-allowed":s.supervisor.sellers.length>0}),title:"Разжаловать в ТП"},{default:_(()=>[be]),_:1},8,["disabled","style"]),m(k,{onClick:c,class:L(["fs-5 pt-1 pb-0",s.supervisor.isActive===!1?"btn-outline-success":"btn-outline-danger"]),disabled:s.supervisor.sellers.length>0,style:A({"cursor: not-allowed":s.supervisor.sellers.length>0}),title:s.supervisor.isActive!==!1?"Деактивировать":"Активировать"},{default:_(()=>[e("i",{class:L(s.supervisor.isActive!==!1?"bi-x-lg":"bi-arrow-counterclockwise")},null,2)]),_:1},8,["class","disabled","style","title"]),m(k,{onClick:b,class:"btn-outline-danger fs-5 pt-1 pb-0",disabled:s.supervisor.sellers.length>0||s.supervisor.isActive,style:A({"cursor: not-allowed":s.supervisor.sellers.length>0||s.supervisor.isActive}),title:"Удалить"},{default:_(()=>[_e]),_:1},8,["disabled","style"])]),s.supervisor.sellers.length>0?(i(),d("div",ye,[(i(!0),d(N,null,D(s.supervisor.sellers,(S,l)=>(i(),T(J,{key:S.id,seller:S,index:l,onUpdateSeller:r=>h(S),onDestroySeller:r=>f(S)},null,8,["seller","index","onUpdateSeller","onDestroySeller"]))),128))])):Y("",!0)]))}},he={class:"row g-2"},Se={class:"col-md-5"},we={class:"col-md-5"},Ae={class:"col-md-2"},ke={__name:"AddSellerItem",props:{customerId:{type:Number,required:!0}},emits:["saveSeller"],setup(g,{emit:y}){const s=V(),a=g,h=()=>({customerId:a.customerId,supervisorId:"",name:"",isActive:!0,isSupervisor:!1}),f=W({seller:h()}),c=y,o=()=>{c("saveSeller",f.seller),f.seller=h()};return(u,b)=>(i(),d(N,null,[m(H,{for:"sellerName",required:""},{default:_(()=>[B("Новый торговый представитель или супервайзер")]),_:1}),e("div",he,[e("div",Se,[m(G,{id:"sellerName",modelValue:f.seller.name,"onUpdate:modelValue":b[0]||(b[0]=p=>f.seller.name=p),placeholder:"ФИО торгового представителя"},null,8,["modelValue"])]),e("div",we,[m(re,{id:"isSupervisor",modelValue:f.seller.isSupervisor,"onUpdate:modelValue":b[1]||(b[1]=p=>f.seller.isSupervisor=p)},{default:_(()=>[B("Отметить, если ТП - это супервайзер")]),_:1},8,["modelValue"])]),e("div",Ae,[m(k,{onClick:o,class:"btn-success w-100",loading:M(s).isLoading,disabled:M(s).isLoading},{default:_(()=>[B("Добавить")]),_:1},8,["loading","disabled"])])])],64))}},xe=e("h4",{class:"mb-3"},"Супервайзеры с привязанными ТП",-1),$e={key:0,class:"row"},Ce={key:1,class:"row"},Ee=e("p",{class:"mb-0"},[e("span",{class:"text-danger"},"Не добавлено ни одного супервайзера!"),e("br"),B("Введите поочерёдно ФИО супервайзеров, отметив при этом галочку.")],-1),Ne=[Ee],Be=e("hr",null,null,-1),Ue=e("h4",{class:"mb-3"},"Торговые представители без привязки к супервайзерам",-1),Le={key:2,class:"row"},Te={key:3,class:"row"},qe=e("p",{class:"mb-0"},[e("span",{class:"text-danger"},"Команда торговых представителей ещё не создана!"),e("br"),B("Наполните команду, вводя поочерёдно ФИО торговых представителей.")],-1),De=[qe],Re=e("hr",null,null,-1),Me={__name:"TheSellers",props:{customerId:{type:Number,required:!0},supervisors:{type:Array,required:!0,default:[]},sellers:{type:Array,required:!0,default:[]}},emits:["updateSellers"],setup(g,{emit:y}){const{post:s,update:a,destroy:h}=j(),f=K(),c=g,o=y,u=async l=>{const{status:r,data:t}=await s(`${C.CUSTOMER}/${c.customerId}${C.CUSTOMER_SELLER}`,l);r==="success"&&(f.clear(),o("updateSellers",t))},b=async l=>{const{status:r,data:t}=await a(`${C.CUSTOMER}/${c.customerId}${C.CUSTOMER_SELLER}/${l.id}`,l);r==="success"&&(f.clear(),o("updateSellers",t))},p=async l=>{if(confirm("Точно удалить сотрудника? Уверены?")){const{status:r,data:t}=await h(`${C.CUSTOMER}/${c.customerId}${C.CUSTOMER_SELLER}/${l.id}`,l);r==="success"&&(console.log(t),o("updateSellers",t))}};function E(l,r){const t=JSON.parse(l.dataTransfer.getData("item"));t.supervisorId=r,b(t)}function S(l,r){l.dataTransfer.dropEffect="move",l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("item",JSON.stringify(r))}return(l,r)=>(i(),d(N,null,[xe,c.supervisors.length>0?(i(),d("div",$e,[(i(!0),d(N,null,D(c.supervisors,(t,w)=>(i(),T(ge,{key:t.id,supervisor:t,index:w,onDrop:x=>E(x,t.id),onDragover:r[0]||(r[0]=I(()=>{},["prevent"])),onDragenter:r[1]||(r[1]=I(()=>{},["prevent"])),onUpdateSupervisor:b,onDestroySupervisor:p,onUpdateSeller:b,onDestroySeller:p},null,8,["supervisor","index","onDrop"]))),128))])):(i(),d("div",Ce,Ne)),Be,Ue,c.sellers.length>0?(i(),d("div",Le,[(i(!0),d(N,null,D(c.sellers,(t,w)=>(i(),T(J,{key:t.id,seller:t,index:w,onDragstart:x=>S(x,t),draggable:!!t.isActive,onUpdateSeller:b,onDestroySeller:p},null,8,["seller","index","onDragstart","draggable"]))),128))])):(i(),d("div",Te,De)),Re,m(F),m(ke,{"customer-id":c.customerId,onSaveSeller:u},null,8,["customer-id"])],64))}},Ie={},Oe={class:"d-flex align-items-center justify-content-center my-4"},Pe=e("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Ve=e("p",{class:"lead mb-0 ms-3"},"Подождите, загружаю...",-1),Fe=[Pe,Ve];function je(g,y){return i(),d("div",Oe,Fe)}const Je=X(Ie,[["render",je]]),ze={key:0,class:"row"},Ye={class:"col-12"},We={class:"my-4"},He={key:0,class:"row profile"},Ge={class:"col-xl-4"},Ke={class:"card"},Xe={class:"card-body profile-card pt-4 d-flex flex-column"},Ze={class:"mb-3"},Qe={class:"card"},es=e("div",{class:"card-header h4"},"Торговые сети",-1),ss={class:"card-body mt-3"},ls={key:0,class:"list-group"},ts={class:"fw-bold"},os=e("span",{class:"text-primary"},"Подробнее",-1),rs={key:1,class:"mb-0"},as={class:"col-xl-8"},is={class:"card"},cs={class:"card-body pt-3"},ns=e("ul",{class:"nav nav-tabs nav-tabs-bordered",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#profile-overview","aria-selected":"true",role:"tab"},"Overview")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#profile-edit","aria-selected":"false",tabindex:"-1",role:"tab"},"Edit Profile")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#profile-settings","aria-selected":"false",tabindex:"-1",role:"tab"},"Settings")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#the-sellers","aria-selected":"false",tabindex:"-1",role:"tab"},"Команда ТП")])],-1),ds={class:"tab-content pt-2"},us=e("div",{class:"tab-pane fade show active profile-overview",id:"profile-overview",role:"tabpanel"},[e("h5",{class:"card-title"},"About"),e("p",{class:"small fst-italic"},"Sunt est soluta temporibus accusantium neque nam maiores cumque temporibus. Tempora libero non est unde veniam est qui dolor. Ut sunt iure rerum quae quisquam autem eveniet perspiciatis odit. Fuga sequi sed ea saepe at unde."),e("h5",{class:"card-title"},"Profile Details"),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Full Name"),e("div",{class:"col-lg-9 col-md-8"},"Kevin Anderson")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Company"),e("div",{class:"col-lg-9 col-md-8"},"Lueilwitz, Wisoky and Leuschke")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Job"),e("div",{class:"col-lg-9 col-md-8"},"Web Designer")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Country"),e("div",{class:"col-lg-9 col-md-8"},"USA")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Address"),e("div",{class:"col-lg-9 col-md-8"},"A108 Adam Street, New York, NY 535022")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Phone"),e("div",{class:"col-lg-9 col-md-8"},"(436) 486-3538 x29071")]),e("div",{class:"row"},[e("div",{class:"col-lg-3 col-md-4 label"},"Email"),e("div",{class:"col-lg-9 col-md-8"},"k.anderson@example.com")])],-1),ps=e("div",{class:"tab-pane fade profile-edit pt-3",id:"profile-edit",role:"tabpanel"},[e("form",null,[e("div",{class:"row mb-3"},[e("label",{for:"profileImage",class:"col-md-4 col-lg-3 col-form-label"},"Profile Image"),e("div",{class:"col-md-8 col-lg-9"},[e("img",{src:"assets/img/profile-img.jpg",alt:"Profile"}),e("div",{class:"pt-2"},[e("a",{href:"#",class:"btn btn-primary btn-sm",title:"Upload new profile image"},[e("i",{class:"bi bi-upload"})]),e("a",{href:"#",class:"btn btn-danger btn-sm",title:"Remove my profile image"},[e("i",{class:"bi bi-trash"})])])])]),e("div",{class:"row mb-3"},[e("label",{for:"fullName",class:"col-md-4 col-lg-3 col-form-label"},"Full Name"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"fullName",type:"text",class:"form-control",id:"fullName",value:"Kevin Anderson"})])]),e("div",{class:"row mb-3"},[e("label",{for:"about",class:"col-md-4 col-lg-3 col-form-label"},"About"),e("div",{class:"col-md-8 col-lg-9"},[e("textarea",{name:"about",class:"form-control",id:"about",style:{height:"100px"}},"Sunt est soluta temporibus accusantium neque nam maiores cumque temporibus. Tempora libero non est unde veniam est qui dolor. Ut sunt iure rerum quae quisquam autem eveniet perspiciatis odit. Fuga sequi sed ea saepe at unde.")])]),e("div",{class:"row mb-3"},[e("label",{for:"company",class:"col-md-4 col-lg-3 col-form-label"},"Company"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"company",type:"text",class:"form-control",id:"company",value:"Lueilwitz, Wisoky and Leuschke"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Job",class:"col-md-4 col-lg-3 col-form-label"},"Job"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"job",type:"text",class:"form-control",id:"Job",value:"Web Designer"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Country",class:"col-md-4 col-lg-3 col-form-label"},"Country"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"country",type:"text",class:"form-control",id:"Country",value:"USA"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Address",class:"col-md-4 col-lg-3 col-form-label"},"Address"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"address",type:"text",class:"form-control",id:"Address",value:"A108 Adam Street, New York, NY 535022"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Phone",class:"col-md-4 col-lg-3 col-form-label"},"Phone"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"phone",type:"text",class:"form-control",id:"Phone",value:"(436) 486-3538 x29071"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Email",class:"col-md-4 col-lg-3 col-form-label"},"Email"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"email",type:"email",class:"form-control",id:"Email",value:"k.anderson@example.com"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Twitter",class:"col-md-4 col-lg-3 col-form-label"},"Twitter Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"twitter",type:"text",class:"form-control",id:"Twitter",value:"https://twitter.com/#"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Facebook",class:"col-md-4 col-lg-3 col-form-label"},"Facebook Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"facebook",type:"text",class:"form-control",id:"Facebook",value:"https://facebook.com/#"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Instagram",class:"col-md-4 col-lg-3 col-form-label"},"Instagram Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"instagram",type:"text",class:"form-control",id:"Instagram",value:"https://instagram.com/#"})])]),e("div",{class:"row mb-3"},[e("label",{for:"Linkedin",class:"col-md-4 col-lg-3 col-form-label"},"Linkedin Profile"),e("div",{class:"col-md-8 col-lg-9"},[e("input",{name:"linkedin",type:"text",class:"form-control",id:"Linkedin",value:"https://linkedin.com/#"})])]),e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary"},"Save Changes")])])],-1),vs=e("div",{class:"tab-pane fade pt-3",id:"profile-settings",role:"tabpanel"},[e("form",null,[e("div",{class:"row mb-3"},[e("label",{for:"fullName",class:"col-md-4 col-lg-3 col-form-label"},"Email Notifications"),e("div",{class:"col-md-8 col-lg-9"},[e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"changesMade",checked:""}),e("label",{class:"form-check-label",for:"changesMade"}," Changes made to your account ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"newProducts",checked:""}),e("label",{class:"form-check-label",for:"newProducts"}," Information on new products and services ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"proOffers"}),e("label",{class:"form-check-label",for:"proOffers"}," Marketing and promo offers ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"checkbox",id:"securityNotify",checked:"",disabled:""}),e("label",{class:"form-check-label",for:"securityNotify"}," Security alerts ")])])]),e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary"},"Save Changes")])])],-1),ms={class:"tab-pane fade pt-1",id:"the-sellers",role:"tabpanel"},fs=e("hr",null,null,-1),Ss={__name:"View",setup(g){const y=se();le();const s=V(),a=oe(),{get:h}=j(),f=+y.params.id,c=R({}),o=R([]),u=R([]);Z(async()=>{await p(f)});const b=Q(()=>Object.keys(c.value).length!==0),p=async l=>{await h(`${C.CUSTOMER}/${l}`,{params:{city:!0,region:!0,retailers:!0,customer_supervisors:!1,customer_sellers:!1}}).then(({status:r,data:t})=>{r==="success"&&(c.value=t)}).then(()=>E(l))},E=async l=>{const{status:r,data:t}=await h(`${C.CUSTOMER}/${l}${C.CUSTOMER_SELLER}`);if(r==="success"){o.value=t.sellers.filter(v=>v.isSupervisor===!0),t.sellers.filter(v=>!o.value.includes(v)).forEach(v=>{if(v.isSupervisor!==!0&&v.supervisorId===null)u.value.push(v);else{const $=o.value.findIndex(z=>z.id===v.supervisorId);o.value[$].sellers.push(v);const q=a.sortArrayByStringColumn(o.value[$].sellers,"name");o.value[$].sellers=a.sortArrayByBoolean(q,"isActive")}});const x=a.sortArrayByStringColumn(u.value,"name");u.value=a.sortArrayByBoolean(x,"isActive");const n=a.sortArrayByStringColumn(o.value,"name");o.value=a.sortArrayByBoolean(n,"isActive")}};ee(()=>y.params.id,()=>{p(y.params.id)});const S=l=>{const r=u.value.findIndex(n=>n.id===l.id),t=o.value.findIndex(n=>n.id===l.id);if(r===-1&&t===-1&&l.isSupervisor===!1&&l.supervisorId!==null){const n=o.value.findIndex(q=>q.id===l.supervisorId),v=o.value[n].sellers.findIndex(q=>q.id===l.id);o.value[n].sellers[v]=l;const $=a.sortArrayByStringColumn(o.value[n].sellers,"name");o.value[n].sellers=a.sortArrayByBoolean($,"isActive")}if(r===-1&&t===-1&&l.isSupervisor===!0&&l.supervisorId===null&&(l.sellers.length===0?o.value.push(l):o.value.forEach(({sellers:n})=>{const v=n.findIndex($=>$.id===l.id);n.splice(v,1)})),r===-1&&t===-1&&l.isSupervisor===!1&&l.supervisorId===null&&(u.value.push(l),o.value.forEach(({sellers:n})=>{const v=n.findIndex($=>$.id===l.id);v!==-1&&(n.splice(v,1),a.sortArrayByStringColumn(n,"name"))})),r===-1&&t!==-1&&l.isSupervisor===!1&&l.supervisorId===null&&(u.value.push(l),o.value.splice(t,1)),r!==-1&&t===-1&&l.isSupervisor===!0&&(o.value.push(l),u.value.splice(r,1)),r!==-1&&t===-1&&l.isSupervisor===!1&&l.supervisorId!==null){u.value.splice(r,1);const n=o.value.findIndex(v=>v.id===l.supervisorId);o.value[n].sellers.push(l),a.sortArrayByStringColumn(o.value[n].sellers,"name")}if(r!==-1&&t===-1&&l.isSupervisor===!1&&l.supervisorId===null&&(l.deletedAt!==null?u.value.splice(r,1):u.value[r]=l),t!==-1&&l.isSupervisor===!0)if(l.deletedAt!==null)o.value.splice(t,1);else{const n=o.value[t].sellers;o.value[t]=l,o.value[t].sellers=n}const w=a.sortArrayByStringColumn(u.value,"name");u.value=a.sortArrayByBoolean(w,"isActive");const x=a.sortArrayByStringColumn(o.value,"name");o.value=a.sortArrayByBoolean(x,"isActive")};return(l,r)=>{const t=te("RouterLink");return i(),d(N,null,[M(s).isLoading?(i(),d("div",ze,[e("div",Ye,[e("h4",We,[m(Je)])])])):(i(),d(N,{key:1},[b.value?(i(),d("div",He,[e("div",Ge,[e("div",Ke,[e("div",Xe,[e("h1",Ze,U(c.value.name),1),e("h3",null,"Регион: "+U(c.value.region.name),1),e("h3",null,"Город: "+U(c.value.city.name),1),e("h3",null,[B("Работает: "),m(ae,{"is-active":c.value.isActive},null,8,["is-active"])])])]),e("div",Qe,[es,e("div",ss,[c.value.retailers.length>0?(i(),d("div",ls,[(i(!0),d(N,null,D(c.value.retailers,(w,x)=>(i(),d("button",{key:w.id,class:"list-group-item list-group-item-action",type:"button"},[m(t,{to:{name:"Manager.Retailer.View",params:{id:w.id}},class:"d-flex justify-content-between text-black"},{default:_(()=>[e("span",null,[B(U(x+1)+". ",1),e("span",ts,U(w.name),1)]),os]),_:2},1032,["to"])]))),128))])):(i(),d("p",rs,"Дистрибутор не имеет торговых сетей."))])])]),e("div",as,[e("div",is,[e("div",cs,[ns,e("div",ds,[us,ps,vs,e("div",ms,[m(Me,{"customer-id":f,supervisors:o.value,sellers:u.value,onUpdateSellers:S},null,8,["supervisors","sellers"])])])])])])])):(i(),T(F,{key:1,class:"mt-3"}))],64)),fs,m(t,{to:{name:"Manager.Customer.Index"},class:"btn btn-secondary my-2",role:"button"},{default:_(()=>[B("Обратно на Мои Контрагенты ")]),_:1})],64)}}};export{Ss as default};
