import{u as k,a as N,r as p,e as C,a1 as x,d as v,c as d,f as s,g as o,w as t,F as y,h as B,t as n,i as R,j as r,k as $,o as c,l as L}from"./app-BPdZrYo3.js";import{u as U}from"./useArrayHandlers-D3DGTb70.js";import{u as M}from"./useHttpService-BNZ4gPHT.js";import{_ as E,a as h}from"./TheFilter-BiC8Pmxx.js";import{_ as F}from"./TheCheckbox-CGFEuL4J.js";import{_ as H}from"./TheBadge-DfL1MJO3.js";import{_,a as I}from"./TwoColumnRow-DgtO-1NF.js";const K={class:"row my-3"},T={class:"col-12"},j={class:"col-md-4 mb-2"},D={class:"col-md-4 mb-2"},G={class:"col-md-4 mb-2"},O={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-md-3 row-cols-sm-2 row-cols-1 g-3"},q={class:"mb-0"},z={key:1,class:"row mb-4"},J={class:"col-12"},P={class:"mt-3 lead"},Q={class:"row my-4"},W={class:"col-12"},X={class:"fw-bold"},le={__name:"Index",setup(Y){k();const g=N(),i=U(),{get:w}=M(),u=p({customers:[]}),a=p({name:"",cityName:"",isActive:!1});C(async()=>{await V()});const V=async()=>{const{data:f}=await w(x.CUSTOMER,{params:{region:!0,city:!0}});u.customers=f.customers},S=()=>{i.resetSearchKeys(a),i.resetSortKeys()},b=v(()=>i.sortArrayByStringColumn(u.customers,"name")),m=v(()=>i.filterArray(b.value,a));return(f,l)=>{const A=$("RouterLink");return c(),d(y,null,[s("div",K,[s("div",T,[o(E,{onResetFilter:S},{default:t(()=>[s("div",j,[o(h,{modelValue:a.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.name=e),placeholder:"Поиск по названию"},{default:t(()=>[r(" Контрагент ")]),_:1},8,["modelValue"])]),s("div",D,[o(h,{modelValue:a.cityName,"onUpdate:modelValue":l[1]||(l[1]=e=>a.cityName=e),placeholder:"Поиск по городу"},{default:t(()=>[r(" Город ")]),_:1},8,["modelValue"])]),s("div",G,[o(F,{id:"is_active",modelValue:a.isActive,"onUpdate:modelValue":l[2]||(l[2]=e=>a.isActive=e)},{default:t(()=>[r(" Показать только активных ")]),_:1},8,["modelValue"])])]),_:1})])]),m.value.length>0?(c(),d("div",O,[(c(!0),d(y,null,B(m.value,e=>(c(),L(I,{key:e.id,"header-classes":["bg-light"],"with-footer":""},{header:t(()=>[s("h4",q,n(e.name),1)]),body:t(()=>[o(_,{title:"Регион (код)"},{default:t(()=>[r(n(e.regionCode),1)]),_:2},1024),o(_,{title:"Город"},{default:t(()=>[r(n(e.cityName),1)]),_:2},1024),o(_,{title:"Работает"},{default:t(()=>[o(H,{"is-active":e.isActive},null,8,["is-active"])]),_:2},1024)]),footer:t(()=>[o(A,{to:{name:"Manager.Customer.View",params:{id:e.id}},class:"btn btn-outline-primary"},{default:t(()=>[r("Подробнее ")]),_:2},1032,["to"])]),_:2},1024))),128))])):(c(),d("div",z,[s("div",J,[s("p",P,n(R(g).isLoading?"Подождите, загружаю...":"Записей не найдено..."),1)])])),s("div",Q,[s("div",W,[s("p",null,[r("Всего записей: "),s("span",X,n(m.value.length),1)])])])],64)}}};export{le as default};
